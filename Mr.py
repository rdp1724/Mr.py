import base64
exec(base64.b64decode("aW1wb3J0IHJlcXVlc3RzLGJzNCxqc29uLG9zLHN5cyxyYW5kb20sZGF0ZXRpbWUsdGltZSxyZQppbXBvcnQgd2ViYnJvd3NlcgppbXBvcnQgdXJsbGliMyxyaWNoLGJhc2U2NApmcm9tIHJpY2gudHJlZSBpbXBvcnQgVHJlZQpmcm9tIHJpY2ggaW1wb3J0IHByaW50IGFzIGNldGFrCmZyb20gcmljaC50YWJsZSBpbXBvcnQgVGFibGUgYXMgbWUKZnJvbSByaWNoLmNvbnNvbGUgaW1wb3J0IENvbnNvbGUgYXMgc29sCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHNvcApmcm9tIHJpY2gucHJvZ3Jlc3MgaW1wb3J0IFByb2dyZXNzLEJhckNvbHVtbixUZXh0Q29sdW1uLFRpbWVFbGFwc2VkQ29sdW1uCmZyb20gcmljaC5wcm9ncmVzcyBpbXBvcnQgU3Bpbm5lckNvbHVtbgpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIHRyZWQKZnJvbSByaWNoLnBhbmVsIGltcG9ydCBQYW5lbCBhcyBuZWwKZnJvbSByaWNoIGltcG9ydCBwcmludCBhcyBjZXRhawpmcm9tIHJpY2guY29sdW1ucyBpbXBvcnQgQ29sdW1ucyBhcyBjb2wKZnJvbSByaWNoIGltcG9ydCBwcmludCBhcyBwcmludHMKZnJvbSByaWNoIGltcG9ydCBwcmV0dHkKZnJvbSByaWNoLnRleHQgaW1wb3J0IFRleHQgYXMgdGVregpkZWYgY2hrKCk6CiAgdXVpZCA9IHN0cihvcy5nZXRldWlkKCkpICsgc3RyKG9zLmdldGxvZ2luKCkpCiAgaWQgPSAiLSIuam9pbih1dWlkKQogIHByaW50KCJcMDMzWzE7MzE7NDBtIFlvdXIgSUQgOiAiK2lkKQogIHRyeToKICAgIGh0dHBDYWh0ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dpdGh1Yi5jb20vcmRwMTcyNC9JZC9ibG9iL21haW4vSWQiKS50ZXh0CiAgICBpZiBpZCBpbiBodHRwQ2FodDoKICAgICAgcHJpbnQoIlwwMzNbMTszNjs0MG0gWU9VUiBJRCBJUyBBQ1RJVkUuLi4uLi4uLi4iKQogICAgICBtc2cgPSBzdHIob3MuZ2V0ZXVpZCgpKQogICAgICB0aW1lLnNsZWVwKDEpCiAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgIHByaW50KCJcMDMzWzE7MzI7NDBtIFlvdXIgSWQgSXMgTm90IEFjdGl2YXRlZCBGb3IgQWN0aXZhdGlvbiBQbGVhc2UgU2VuZCBUaGlzICAiLGlkLCJUbyIsIkBNNEY4Ml8yNCIpCiAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgd2ViYnJvd3Nlci5vcGVuKCJodHRwczovL3QubWUvbTRmODJfMjQiKQogICAgICBzeXMuZXhpdCgpCiAgICAgIAogICAgIAogIGV4Y2VwdDoKICAgIHN5cy5leGl0KCkKICAgIGlmIG5hbWUgPT0gJ21haW4nOgogICAgIHByaW50KGxvZ28pCiAgICAgY2hrKCkKICAgCmNoaygpCgpNMiA9ICJbI0ZGMDAwMF0iIApIMiA9ICJbIzAwRkYwMF0iIApLMiA9ICJbI0ZGRkYwMF0iIApCMiA9ICJbIzAwQzhGRl0iIApQMiA9ICJbI0ZGRkZGRl0iIAp0cnk6CglmaWxlX2NvbG9yID0gb3BlbigiZGF0YS90aGVtZV9jb2xvciIsInIiKS5yZWFkKCkKCWNvbG9yX3RleHQgPSBmaWxlX2NvbG9yLnNwbGl0KCJ8IilbMF0KCWNvbG9yX3BhbmVsID0gZmlsZV9jb2xvci5zcGxpdCgifCIpWzFdCmV4Y2VwdDoKCWNvbG9yX3RleHQgPSAiWyMwMEM4RkZdIgoJY29sb3JiYXBhID0gcmFuZG9tLmNob2ljZShbSDIsSzIsTTIsQjIsUDJdKSAKCWNvbG9yX3BhbmVsID0gIiMwMEM4RkYiCnByZXR0eS5pbnN0YWxsKCkKQ09OPXNvbCgpCnVnZW4yPVtdCnVnZW49W10KcHJveHh5PVtdCmNva2JydXQ9W10Kc2VzPXJlcXVlc3RzLlNlc3Npb24oKQpwcmluY3A9W10KCmZvciB4ZCBpbiByYW5nZSgxMDAwMCk6CiAgICBhPSdNb3ppbGxhLzUuMCAoU3ltYmlhbi8zOyBTZXJpZXM2MC81LjInCiAgICBiPXJhbmRvbS5yYW5kcmFuZ2UoMSwgOSkKICAgIGM9cmFuZG9tLnJhbmRyYW5nZSgxLCA5KQogICAgZD0nTm9raWFOOC0wMC8wMTIuMDAyOycKICAgIGU9cmFuZG9tLnJhbmRyYW5nZSgxMDAsIDk5OTkpCiAgICBmPSdQcm9maWxlL01JRFAtMi4xIENvbmZpZ3VyYXRpb24vQ0xEQy0xLjEgKSBBcHBsZVdlYktpdC81MzMuNCAoS0hUTUwsIGxpa2UgR2Vja28pIE5va2lhQnJvd3Nlci8nCiAgICBnPXJhbmRvbS5yYW5kcmFuZ2UoMSwgOSkKICAgIGg9cmFuZG9tLnJhbmRyYW5nZSgxLCA0KQogICAgaT1yYW5kb20ucmFuZHJhbmdlKDEsIDQpCiAgICBqPXJhbmRvbS5yYW5kcmFuZ2UoMSwgNCkKICAgIGs9JzcuMy4wIE1vYmlsZSBTYWZhcmkvNTMzLjQgM2dwcC1nYmEnCiAgICB1YWt1PShmJ3thfXtifS57Y30ge2R9e2V9e2Z9e2d9LntofS57aX0ue2p9IHtrfScpCiAgICB1Z2VuMi5hcHBlbmQodWFrdSkgCgogICAgYWE9J01vemlsbGEvNS4wIChYMTE7JwogICAgYj1yYW5kb20uY2hvaWNlKFsnNicsJzcnLCc4JywnOScsJzEwJywnMTEnLCcxMiddKQogICAgYz0nTGludXggeDg2XzY0KScKICAgIGQ9cmFuZG9tLmNob2ljZShbJ0EnLCdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ10pCiAgICBlPXJhbmRvbS5yYW5kcmFuZ2UoMSwgOTk5KQogICAgZj1yYW5kb20uY2hvaWNlKFsnQScsJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXSkKICAgIGc9J0FwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDUuMC4wLjAnCiAgICBoPXJhbmRvbS5yYW5kcmFuZ2UoNzMsMTAwKQogICAgaT0nMCcKICAgIGo9cmFuZG9tLnJhbmRyYW5nZSg0MjAwLDQ5MDApCiAgICBrPXJhbmRvbS5yYW5kcmFuZ2UoNDAsMTUwKQogICAgbD0nU2FmYXJpLzUzNy4zNicKICAgIHVha3UyPWYne2FhfSB7Yn07IHtjfXtkfXtlfXtmfSkge2d9e2h9LntpfS57an0ue2t9IHtsfScKICAgIHVnZW4uYXBwZW5kKHVha3UyKQpmb3IgeCBpbiByYW5nZSgxMDAwKToKICAgIHJyID0gcmFuZG9tLnJhbmRpbnQKICAgIHJjID0gcmFuZG9tLmNob2ljZQogICAgc2F0dSA9IGYiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEyOyBDUEgyMTI3IEJ1aWxkL1JLUTEue3N0cihycigyMTExMTEsMjk5OTk5KSl9LjAwMSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lL3tzdHIocnIoNzMsOTkpKX0uMC57c3RyKHJyKDQ1MDAsNDkwMCkpfS57c3RyKHJyKDc1LDE1MCkpfSBNb2JpbGUgU2FmYXJpLzUzNy4zNiIKICAgIGR1YSAgPSBmIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCB7c3RyKHJyKDcsMTIpKX07IFJNWDMxOTUgQnVpbGQvU1AxQS4yMTA4MTIuMDE2OyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lL3tzdHIocnIoNzUsMTUwKSl9LjAue3N0cihycig1MTExLDU5OTkpKX0ue3N0cihycig3Myw5OSkpfSBNb2JpbGUgU2FmYXJpLzUzNy4zNiIKICAgIHRpZ2EgID0gZiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOTsgdml2byAxOTA0IEJ1aWxkL1BQUjEue3N0cihycigxMTExMTEsMTk5OTk5KSl9LjAxMTsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS97c3RyKHJyKDczLDk5KSl9LjAue3N0cihycig0NTAwLDQ5MDApKX0ue3N0cihycig3NSwxNTApKX0gTW9iaWxlIFNhZmFyaS81MzcuMzYgd2ticm93c2VyIDUuMC4xNyB7c3RyKHJyKDIxMTExMTEsMjk5OTk5OSkpfSBqcyA1LjEuMSBuZXdmb2N1cyBsbmc9cnUiCiAgICBlbXBhdCAgPSBmIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA5e3N0cihycig3LDEyKSl9OyBSTVgxODExKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUve3N0cihycig3NSwxNTApKX0uMC57c3RyKHJyKDUxMTEsNTk5OSkpfS57c3RyKHJyKDczLDk5KSl9IE1vYmlsZSBTYWZhcmkvNTM3LjM2IgogICAgbGltYSAgPSBmIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMntzdHIocnIoNywxMikpfTsgSU4yMDEzKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUve3N0cihycig3NSwxNTApKX0uMC57c3RyKHJyKDUxMTEsNTk5OSkpfS57c3RyKHJyKDczLDk5KSl9IE1vYmlsZSBTYWZhcmkvNTM3LjM2IgogICAgVXNlckFnZW50c3MgPSBzdHIocmMoW3NhdHUsZHVhLHRpZ2EsZW1wYXQsbGltYV0pKQogICAgdWdlbi5hcHBlbmQoVXNlckFnZW50c3MpCnRyeToKICAgIHVybF9wcm94eSA9IHJhbmRvbS5jaG9pY2UoWwogICAgICAgICAgICAgICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vVGhlU3BlZWRYL1NPQ0tTLUxpc3QvbWFzdGVyL3NvY2tzNS50eHQiLApdKQpleGNlcHQ6cGFzcwogICAKCnRyeToKICAgIHVybCA9IHJlcXVlc3RzLmdldChmInt1cmxfcHJveHl9IikudGV4dAogICAgZm9yIGlrZmFyIGluIHVybC5zcGxpdGxpbmVzKCk6cHJveHh5LmFwcGVuZChpa2ZhcikKZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICBwcmludHMobmVsKGYie1AyfUFuZGEgVGlkYWsgVGVyaHVidW5nIEtlIEludGVybmV0LCBTaWxhaGthbiBQZXJpa3NhIEtvbmVrc2kgSW50ZXJuZXQgQW5kYSIsd2lkdGg9ODAscGFkZGluZz0oMCwyKSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSk7ZXhpdCgpCgppZCxpZDIsbG9vcCxvayxjcCxha3VuLG9wcmVrLG1ldGhvZCxsaXNlbnNpa3UsdGFwbGlrYXNpLHRva2Vua3UsdWlkLGxpc2Vuc2lrdW5pPSBbXSxbXSwwLDAsMCxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXQpjb2ticnV0PVtdCnB3cGx1c3MscHdueWE9W10sW10KUCA9ICdceDFiWzE7OTdtJwpNID0gJ1x4MWJbMTs5MW0nCkggPSAnXHgxYlsxOzkybScKSyA9ICdceDFiWzE7OTNtJwpCID0gJ1x4MWJbMTs5NG0nClUgPSAnXHgxYlsxOzk1bScgCk8gPSAnXHgxYlsxOzk2bScKTiA9ICdceDFiWzBtJyAgICAKWiA9ICJcMDMzWzE7MzBtIgpzaXIgPSAnXDAzM1s0MW1ceDFiWzE7OTdtJwp4ID0gJ1wzM1ttJwptID0gJ1x4MWJbMTs5MW0nIAprID0gJ1wwMzNbOTNtJyAKaCA9ICdceDFiWzE7OTJtJyAKaGggPSAnXDAzM1szMm0nIAp1ID0gJ1wwMzNbOTVtJwprayA9ICdcMDMzWzMzbScKYiA9ICdcMzNbMTs5Nm0nIApwID0gJ1x4MWJbMDszNG0nIAphc3UgPSByYW5kb20uY2hvaWNlKFttLGssaCx1LGJdKQpkaWMgPSB7JzEnOidKYW51YXJ5JywnMic6J0ZlYnJ1YXJ5JywnMyc6J01hcmNoJywnNCc6J0FwcmlsJywnNSc6J01heScsJzYnOidKdW5lJywnNyc6J0p1bHknLCc4JzonQXVndXN0JywnOSc6J1NlcHRlbWJlcicsJzEwJzonT2N0b2JlcicsJzExJzonTm92ZW1iZXInLCcxMic6J0RlY2VtYmVyJ30KZGljMiA9IHsnMDEnOidKYW51YXJ5JywnMDInOidGZWJydWFyeScsJzAzJzonTWFyY2gnLCcwNCc6J0FwcmlsJywnMDUnOidNYXknLCcwNic6J0p1bmUnLCcwNyc6J0p1bHknLCcwOCc6J0F1Z3VzdCcsJzA5JzonU2VwdGVtYmVyJywnMTAnOidPY3RvYmVyJywnMTEnOidOb3ZlbWJlcicsJzEyJzonRGV2ZW1iZXInfQp0Z2wgPSBkYXRldGltZS5kYXRldGltZS5ub3coKS5kYXkKYmxuID0gZGljWyhzdHIoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkubW9udGgpKV0KdGhuID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkueWVhcgpva2MgPSAnTVIgSVQtJytzdHIodGdsKSsnLScrc3RyKGJsbikrJy0nK3N0cih0aG4pKycudHh0JwpjcGMgPSAnTVJJVC0nK3N0cih0Z2wpKyctJytzdHIoYmxuKSsnLScrc3RyKHRobikrJy50eHQnCmRlZiByZW52X3h5KHUpOgogICAgICAgIGZvciBlIGluIHUgKyAiXG4iOnN5cy5zdGRvdXQud3JpdGUoZSk7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMC4wMDUpCiAgICAgICAgCmRlZiBNcmlUKGtlbGlsaW5nKToKCWZvciBtYXUgaW4ga2VsaWxpbmcgKyAnXG4nOgoJCXN5cy5zdGRvdXQud3JpdGUobWF1KQoJCXN5cy5zdGRvdXQuZmx1c2goKTtzbGVlcCgwLjAzKSAKCQkKCQkKZGVmIGNsZWFyKCk6Cglvcy5zeXN0ZW0oJ2NsZWFyJykKZGVmIGJhY2soKToKCWxvZ2luKCkKCQpkZWYgbm9uZSgpOgoJY2xlYXIoKQoJcHJpbnRzKChmIiIiXHQgXDAzM1sxOzMyOzQwbXtjb2xvcl90ZXh0fXtIMn0gCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgX18gIF9fICAgICBfX18gX19fX18gCiB8ICBcLyAgfF8gX3xfIF98XyAgIF98CiB8IHxcL3wgfCAnX198IHwgIHwgfCAgCiB8IHwgIHwgfCB8ICB8IHwgIHwgfCAgCiB8X3wgIHxffF98IHxfX198IHxffCAgCiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIApQcm9ncmFtbWVyIE00RjgyXzI0ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgCgoKIiIiKSkKZGVmIGluZm8oKToKCXByaW50cyhmIiIie0gyfSB7SDJ9CiIiIikKZGVmIGJhbm5lcigpOgoJY2xlYXIoKQoJcHJpbnRzKChmIiIiXHQge2NvbG9yX3RleHR9e0gyfSAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICBfXyAgX18gICAgIF9fXyBfX19fXyAKIHwgIFwvICB8XyBffF8gX3xfICAgX3wKIHwgfFwvfCB8ICdfX3wgfCAgfCB8ICAKIHwgfCAgfCB8IHwgIHwgfCAgfCB8ICAKIHxffCAgfF98X3wgfF9fX3wgfF98ICAKICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgClByb2dyYW1tZXIgTTRGODJfMjQKIiIiKSkKZGVmIGxvZ2luKCk6Cgl0cnk6CgkJdG9rZW4gPSBvcGVuKCcudG9rZW4udHh0JywncicpLnJlYWQoKQoJCWNvayA9IG9wZW4oJy5jb2sudHh0JywncicpLnJlYWQoKQoJCXRva2Vua3UuYXBwZW5kKHRva2VuKQoJCXRyeToKCQkJc3kgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2ZpZWxkcz1pZCxuYW1lJmFjY2Vzc190b2tlbj0nK3Rva2Vua3VbMF0sIGNvb2tpZXM9eydjb29raWUnOmNva30pCgkJCXN5MiA9IGpzb24ubG9hZHMoc3kudGV4dClbJ25hbWUnXQoJCQlzeTMgPSBqc29uLmxvYWRzKHN5LnRleHQpWydpZCddCgkJCW1lbnUoc3kyLHN5MykKCQlleGNlcHQgS2V5RXJyb3I6CgkJCWxvZ2luX2xhZ2kzMzQoKQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJcHJpbnQoJ1wwMzNbMTszNTs0MG1CQUQgSU5URVJORVQnKQoJCQlleGl0KCkKCWV4Y2VwdCBJT0Vycm9yOgoJCWxvZ2luX2xhZ2kzMzQoKQpkZWYgbG9naW5fbGFnaTMzNCgpOgoJdHJ5OgoJCW9zLnN5c3RlbSgnY2xlYXInKQoJCWJhbm5lcigpCgkJaW5mbygpIAoJCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQoJCWNvb2tpZSA9IGlucHV0KCdcblwwMzNbMTszNjs0MG0gR0lNTUUgQ09PS0lFUycpCgkJcHJpbnQoeCkKCQljb29raWVzID0geydjb29raWUnOmNvb2tpZX0KCQl1cmwgPSAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2Fkc21hbmFnZXIvbWFuYWdlL2NhbXBhaWducycKCQlyZXEgPSBzZXMuZ2V0KHVybCxjb29raWVzPWNvb2tpZXMpCgkJc2V0ID0gcmUuc2VhcmNoKCdhY3Q9KC4qPykmbmF2X3NvdXJjZScsc3RyKHJlcS5jb250ZW50KSkuZ3JvdXAoMSkKCQluZWsgPSAnJXM/YWN0PSVzJm5hdl9zb3VyY2U9bm9fcmVmZXJyZXInJSh1cmwsc2V0KQoJCXJvcSA9IHNlcy5nZXQobmVrLGNvb2tpZXM9Y29va2llcykKCQl0b2sgPSByZS5zZWFyY2goJ2FjY2Vzc1Rva2VuPSIoLio/KSInLHN0cihyb3EuY29udGVudCkpLmdyb3VwKDEpCgkJdG9rZW53ID0gb3BlbigiLnRva2VuLnR4dCIsICJ3Iikud3JpdGUodG9rKQoJCWNva2lldyA9IG9wZW4oIi5jb2sudHh0IiwgInciKS53cml0ZShjb29raWUpCgkJcHJpbnQoJ1xuTE9HR0VEIElOICcpCgkJZXhpdCgpCglleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJb3Muc3lzdGVtKCJybSAtZiAudG9rZW4udHh0IikKCQlvcy5zeXN0ZW0oInJtIC1mIC5jb2sudHh0IikKCQlwcmludChmJ1wwMzNbMG1FeHBpcmVkJykKCQlleGl0KCkKCmRlZiBtZW51KG15X25hbWUsbXlfaWQpOgoJdHJ5OgoJCXRva2VuID0gb3BlbignLnRva2VuLnR4dCcsJ3InKS5yZWFkKCkKCQljb2sgPSBvcGVuKCcuY29rLnR4dCcsJ3InKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCXByaW50KCdcMDMzWzE7MzQ7NDBtIEV4cGlyZWQgJykKCQl0aW1lLnNsZWVwKDUpCgkJbG9naW5fbGFnaTMzNCgpCglvcy5zeXN0ZW0oJ2NsZWFyJykKCWJhbm5lcigpCglwcmludCgnJykKCXRyeTpjZWtfZGF0YSA9IHJlcXVlc3RzLmdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iKS5qc29uKCkKCWV4Y2VwdDpjZWtfZGF0YSA9IHsnLSd9Cgl0cnk6TXJpVFhkID0gY2VrX2RhdGFbImlzcCJdCglleGNlcHQ6TXJpVFhkID0geyctJ30KCXRyeTpNcmlUU3UgPSBjZWtfZGF0YVsiY2l0eSJdCglleGNlcHQ6TXJpVFN1ID0geyctJ30KCWluZm8oKSAKCXByaW50cyhuZWwoZid7QjJ9XDAzM1sxOzM2OzQwbUNPTkZJUk1FRCBJRCAlcyAlc3tQMn0nJSgobXlfaWQpLE1yaVRTdSksd2lkdGg9ODAscGFkZGluZz0oMCw3KSxzdHlsZT1mIntjb2xvcl9wYW5lbH0iKSkgCglwcmludHMobmVsKGYiIiJ7SDJ9XDAzM1sxOzMyOzQwbS4gMVBVQkxJQwpcMDMzWzE7MzQ7NDBtLiAyU0VWRVJFQUwKXDAzM1sxOzM1OzQwbS4gM0ZJTEUKMC4gTE9HIE9VVCIiIix3aWR0aD04MCxwYWRkaW5nPSgwLDcpLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKQoJTXJpVCA9IGlucHV0KCcgXDAzM1sxOzM1OzQwbSBDSE9PU0UgICcpCglwcmludCgnJykKCWlmIE1yaVQgaW4gWycxJ106CgkJZHVtcF9wdWJsaWsoKQoJZWxpZiBNcmlUIGluIFsnMiddOgoJCWR1bXBfbWFzc2FsKCkKCWVsaWYgTXJpVCBpbiBbJzMnXToKCQlGaWxlKCkKCWVsaWYgTXJpVCBpbiBbJzQnXToKCQlyZXN1bHQoKQoJZWxpZiBNcmlUIGluIFsnNSddOgoJCWZpbGVfY3AoKQoJZWxpZiBNcmlUIGluIFsnNiddOgoJCXNpdSgpCgllbGlmIE1yaVQgaW4gWycwJ106CgkJb3Muc3lzdGVtKCdybSAtcmYgLnRva2VuLnR4dCcpCgkJb3Muc3lzdGVtKCdybSAtcmYgLmNvay50eHQnKQoJCXByaW50KCcgTG9nZ2VkIG91dCAnKQoJCWV4aXQoKQoJZWxzZToKCQlwcmludCgnUExFQVNFIENIT09TRSBPTiBBIExJU1QgJykKCQliYWNrKCkKZGVmIHNpdSgpOgoJc3RhcnQoKQoJZ2V0X2RhdGFfd2ViKCkKCWFraGlyKCkKZGVmIGVycm9yKCk6CglwcmludChmJycpCgl0aW1lLnNsZWVwKDQpCgliYWNrKCkKZGVmIGdhbnRpX3RlbWEoKToKCQlwcmludHMobmVsKGYiIiIgTXJpVPO+k6ggQmV3YXJlIE9mIEVkaXRvcnMgIiIiLHdpZHRoPTgwLHBhZGRpbmc9KDAsNyksc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpCgkJc2xlZXAoMikgCgkJYmFjaygpCmRlZiBkdW1wX3B1YmxpaygpOgoJdHJ5OgoJCXRva2VuID0gb3BlbignLnRva2VuLnR4dCcsJ3InKS5yZWFkKCkKCQlrdWtpcyA9IG9wZW4oJy5jb2sudHh0JywncicpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJZXhpdCgpCglwcmludHMobmVsKGYne0syfVwwMzNbMTszNTs0MG1DcmFjayBGcm9tIFlvdXIgSUQgaW5wdXQge1AyfSJcMDMzWzMybU1lXDAzM1swbSIge0syfVRvIENyYWNrIEZyb20gWW91ciBJRCAgICAgICAgICAgICAgIHtQMn0nLHdpZHRoPTkwLHBhZGRpbmc9KDAsOSksc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpIAoJcGlsID0gaW5wdXQoeCttKycnK3grJyBHaW1tZSBJRHMgOiAnKQoJdHJ5OgoJCWtvaDIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxLjAvJytwaWwrJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLGNvb2tpZXM9eydjb29raWUnOiBrdWtpc30pLmpzb24oKQoJCWZvciBwaSBpbiBrb2gyWydmcmllbmRzJ11bJ2RhdGEnXToKCQkJdHJ5OmlkLmFwcGVuZChwaVsnaWQnXSsnfCcrcGlbJ25hbWUnXSkKCQkJZXhjZXB0OmNvbnRpbnVlCgkJcHJpbnQoJycpCgkJcHJpbnQoeCttKycnK3grJyBBbGwgSURzXDAzM1szMm0nK3N0cihsZW4oaWQpKSkKCQlzZXR0aW5nKCkKCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQlwcmludCgnXDAzM1sxOzM1OzQwbSBJTlRFUk5FVCBQUk9CTEVNJykKCQlleGl0KCkKCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CgkJcHJpbnQoJ1RyeSBBZ2FpbiAnKQoJCWV4aXQoKQpkZWYgRmlsZSgpOgoJCQl0cnk6CgkJCQlmaWxlWCA9IGlucHV0ICgnXG4gR0lNTUUgRklMRSBOQU1FIDogJykgCgkJCQlmb3IgbGluZSBpbiBvcGVuKGZpbGVYLCAncicpLnJlYWRsaW5lcygpOgoJCQkJCWlkLmFwcGVuZChsaW5lLnN0cmlwKCkpCgkJCQlzZXR0aW5nKCkKCQkJZXhjZXB0IElPRXJyb3I6CgkJCQlleGl0KCJcbiAgRklMRSAlcyBcMDMzWzE7MzQ7NDBtSEFTIE5PVCBGT1VORCIlKGZpbGVYKSkKZGVmIGR1bXBfbWFzc2FsKCk6Cgl0cnk6CgkJdG9rZW4gPSBvcGVuKCcudG9rZW4udHh0JywncicpLnJlYWQoKQoJCWNvayA9IG9wZW4oJy5jb2sudHh0JywncicpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJZXhpdCgpCgl0cnk6CgkJanVtID0gaW50KGlucHV0KCcgR0lNTUUgTlVNQkVSIE9GIElEcyA6ICcpKQoJZXhjZXB0IFZhbHVlRXJyb3I6CgkJcHJpbnQoJyBQTEVBU0UgT05MWSBJTlRzJykKCQlleGl0KCkKCWlmIGp1bTwxIG9yIGp1bT4xMDA6CgkJcHJpbnQoJ1wwMzNbMTszNDs0MG0gQ0hBTkdFIElEIEkgQ09VTlQgRFVNUCAnKQoJCWV4aXQoKQoJc2VzPXJlcXVlc3RzLlNlc3Npb24oKQoJeXogPSAwCglmb3IgbWV0IGluIHJhbmdlKGp1bSk6CgkJeXorPTEKCQlrbCA9IGlucHV0KCcgR0lNTUUgSUQnK3N0cih5eikrJyA6ICcpCgkJdWlkLmFwcGVuZChrbCkKCWZvciB1c2VyciBpbiB1aWQ6CgkJdHJ5OgoJCQljb2wgPSBzZXMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92Mi4wLycrdXNlcnIrJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLCBjb29raWVzID0geydjb29raWVzJzpjb2t9KS5qc29uKCkKCQkJZm9yIG1pIGluIGNvbFsnZnJpZW5kcyddWydkYXRhJ106CgkJCQl0cnk6CgkJCQkJaXNvID0gKG1pWydpZCddKyd8JyttaVsnbmFtZSddKQoJCQkJCWlmIGlzbyBpbiBpZDpwYXNzCgkJCQkJZWxzZTppZC5hcHBlbmQoaXNvKQoJCQkJZXhjZXB0OmNvbnRpbnVlCgkJZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKCQkJcGFzcwoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJcHJpbnQoJ0JBRCBJTlRFUk5FVCcpCgkJCWV4aXQoKQoJdHJ5OgoJCXByaW50KCcnKQoJCXByaW50KGYnIEFMTCBJZHMgQ09MTEVDVEVEIHtofScrc3RyKGxlbihpZCkpKQoJCXNldHRpbmcoKQoJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCXByaW50KGYne3h9JykKCQlwcmludCgnQkFEIElOVEVSTkVUJykKCQliYWNrKCkKCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CgkJcHJpbnQoZid7a30gTk9UIFBVQkxJQycpCgkJdGltZS5zbGVlcCgzKQoJCWJhY2soKQoJCQpkZWYgcmVzdWx0KCk6CglwcmludCgnXDAzM1sxOzMyOzQwbTEuIENQcyAnKQoJcHJpbnQoJ1wwMzNbMTszMzs0MG0yLiBPS3MgJykKCXByaW50KCcgMC4gRVhJVAknKQoJcHJpbnQoJ01yaVTzvpOoJykKCXdlYmJyb3dzZXIub3BlbignaHR0cHM6Ly90Lm1lL200ZjgyXzI0JykKCWt6ID0gaW5wdXQoJ1xuXDAzM1sxOzM2OzQwbUNIT09TRTogJykKCXByaW50KCcnKQoJaWYga3ogaW4gWycxJywnMDEnXToKCQl0cnk6dmluID0gb3MubGlzdGRpcignTVIgSVRDUCcpCgkJZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgoJCQlwcmludCgnIFdST05HIEZJTEUgJykKCQkJdGltZS5zbGVlcCgzKQoJCQliYWNrKCkKCQlpZiBsZW4odmluKT09MDoKCQkJcHJpbnQoJ0NQICcpCgkJCXRpbWUuc2xlZXAoMikKCQkJYmFjaygpCgkJZWxzZToKCQkJY2loID0gMAoJCQlsb2wgPSB7fQoJCQlmb3IgaXNpIGluIHZpbjoKCQkJCXRyeTpoZW0gPSBvcGVuKCdDUC8nK2lzaSwncicpLnJlYWRsaW5lcygpCgkJCQlleGNlcHQ6Y29udGludWUKCQkJCWNpaCs9MQoJCQkJaWYgY2loPDEwOgoJCQkJCW5vbSA9ICcnK3N0cihjaWgpCgkJCQkJbG9sLnVwZGF0ZSh7c3RyKGNpaCk6c3RyKGlzaSl9KQoJCQkJCWxvbC51cGRhdGUoe25vbTpzdHIoaXNpKX0pCgkJCQkJcHJpbnQoJycrbm9tKycuICcraXNpKydcMDMzWzMxbSAnK3N0cihsZW4oaGVtKSkrJyBcMDMzWzBtY2VrcG9pbnQgJyt4KQoJCQkJZWxzZToKCQkJCQlsb2wudXBkYXRlKHtzdHIoY2loKTpzdHIoaXNpKX0pCgkJCQkJcHJpbnQoJycrc3RyKGNpaCkrJy4gJytpc2krJ1wwMzNbMzFtICcrc3RyKGxlbihoZW0pKSsnIFwwMzNbMG1jZWtwb2ludCAnK3gpCgkJCWdlZWggPSBpbnB1dCgnXG4gU0VMRUNUIDogJykKCQkJcHJpbnQoJycpCgkJCXRyeTpnZWggPSBsb2xbZ2VlaF0KCQkJZXhjZXB0IEtleUVycm9yOgoJCQkJcHJpbnQoJyAgJykKCQkJCWV4aXQoKQoJCQl0cnk6bGluID0gb3BlbignQ1AvJytnZWgsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJCWV4Y2VwdDoKCQkJCXByaW50KCdXUk9ORyBGSUxFICcpCgkJCQl0aW1lLnNsZWVwKDIpCgkJCQliYWNrKCkKCQkJbm9jcD0wCgkJCWZvciBjcGt1IGluIHJhbmdlKGxlbihsaW4pKToKCQkJCWNwa3VuaT1saW5bbm9jcF0uc3BsaXQoJ3wnKQoJCQkJcHJpbnQoZifilbDilIBDUFwwMzNbMzNtIHtjcGt1bmlbMF19fHtjcGt1bmlbMV19XDAzM1swbScpCgkJCQlub2NwICs9MQoJCQlpbnB1dCgnXG5FTlRFUiAgJykKCQkJYmFjaygpCgllbGlmIGt6IGluIFsnMicsJzAyJ106CgkJdHJ5OnZpbiA9IG9zLmxpc3RkaXIoJ09LJykKCQlleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CgkJCXByaW50KCdXUk9ORyBBR0FJTiAnKQoJCQl0aW1lLnNsZWVwKDIpCgkJCWJhY2soKQoJCWlmIGxlbih2aW4pPT0wOgoJCQlwcmludCgnU1VDQ0VTIEZJTEUgJykKCQkJdGltZS5zbGVlcCgyKQoJCQliYWNrKCkKCQllbHNlOgoJCQljaWggPSAwCgkJCWxvbCA9IHt9CgkJCWZvciBpc2kgaW4gdmluOgoJCQkJdHJ5OmhlbSA9IG9wZW4oJ09LLycraXNpLCdyJykucmVhZGxpbmVzKCkKCQkJCWV4Y2VwdDpjb250aW51ZQoJCQkJY2loKz0xCgkJCQlpZiBjaWg8MTAwOgoJCQkJCW5vbSA9ICcnK3N0cihjaWgpCgkJCQkJbG9sLnVwZGF0ZSh7c3RyKGNpaCk6c3RyKGlzaSl9KQoJCQkJCWxvbC51cGRhdGUoe25vbTpzdHIoaXNpKX0pCgkJCQkJcHJpbnQoJycrbm9tKycuICcraXNpKydcMDMzWzMybSAnK3N0cihsZW4oaGVtKSkrJyBcMDMzWzBtU3Vjc2VzICcreCkKCQkJCWVsc2U6CgkJCQkJbG9sLnVwZGF0ZSh7c3RyKGNpaCk6c3RyKGlzaSl9KQoJCQkJCXByaW50KCcnK3N0cihjaWgpKycuICcraXNpKydcMDMzWzMybSAnK3N0cihsZW4oaGVtKSkrJyBcMDMzWzBtU3Vjc2VzICcreCkKCQkJZ2VlaCA9IGlucHV0KCdcbkNIT09TRSA6ICcpCgkJCXRyeTpnZWggPSBsb2xbZ2VlaF0KCQkJZXhjZXB0IEtleUVycm9yOgoJCQkJcHJpbnQoJyAnKQoJCQkJZXhpdCgpCgkJCXRyeTpsaW4gPSBvcGVuKCdPSy8nK2dlaCwncicpLnJlYWQoKS5zcGxpdGxpbmVzKCkKCQkJZXhjZXB0OgoJCQkJcHJpbnQoJyAgJykKCQkJCXRpbWUuc2xlZXAoMikKCQkJCWJhY2soKQoJCQlub2NwPTAKCQkJZm9yIGNwa3UgaW4gcmFuZ2UobGVuKGxpbikpOgoJCQkJY3BrdW5pPWxpbltub2NwXS5zcGxpdCgnfCcpCgkJCQlwcmludChmJ1xu4pWw4pSAT0tcMDMzWzMybSB7Y3BrdW5pWzBdfXx7Y3BrdW5pWzFdfXxcMDMzWzMybXtjcGt1bmlbMl19XDAzM1swbScpCgkJCQlub2NwICs9MQoJCQlpbnB1dCgnXG5FbnRlciAnKQoJCQliYWNrKCkKCWVsaWYga3ogaW4gWycwJywnMDAnXToKCQliYWNrKCkKCWVsc2U6CgkJcHJpbnQoJycpCgkJZXhpdCgpCgpkZWYgY3JhY2tfZmlsZSgpOgoJdHJ5OnZpbiA9IG9zLmxpc3RkaXIoJ0RVTVAnKQoJZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgoJCXByaW50KCcgJykKCQl0aW1lLnNsZWVwKDIpCgkJYmFjaygpCglpZiBsZW4odmluKT09MDoKCQlwcmludCgnJykKCQl0aW1lLnNsZWVwKDIpCgkJYmFjaygpCgllbHNlOgoJCWNpaCA9IDAKCQlsb2wgPSB7fQoJCWZvciBpc2kgaW4gdmluOgoJCQl0cnk6aGVtID0gb3BlbignRFVNUC8nK2lzaSwncicpLnJlYWRsaW5lcygpCgkJCWV4Y2VwdDpjb250aW51ZQoJCQljaWgrPTEKCQkJaWYgY2loPDEwMDoKCQkJCW5vbSA9ICcnK3N0cihjaWgpCgkJCQlsb2wudXBkYXRlKHtzdHIoY2loKTpzdHIoaXNpKX0pCgkJCQlsb2wudXBkYXRlKHtub206c3RyKGlzaSl9KQoJCQkJcHJpbnQoZicgJXMuICVzICh7aH0gJXN7eH0gaWR6ICknJShub20saXNpLGxlbihoZW0pKSkKCQkJZWxzZToKCQkJCWxvbC51cGRhdGUoe3N0cihjaWgpOnN0cihpc2kpfSkKCQkJCXByaW50KCdbJytzdHIoY2loKSsnXSAnK2lzaSsnIFsgJytzdHIobGVuKGhlbSkpKycgQWNjb3VudCBdJyt4KQoJCQkJcHJpbnQoJ+KVsOKUgCAlcy4gJXMgKHtofSAlcyB7eH1pZHopICclKGNpaCxpc2ksbGVuKGhlbSkpKQoJCWdlZWggPSBpbnB1dCgnXG4gQ0hPT1NFIDogJykKCQlwcmludCgnJykKCQl0cnk6Z2VoID0gbG9sW2dlZWhdCgkJZXhjZXB0IEtleUVycm9yOgoJCQlwcmludChmJ3trfSB7eH0nKQoJCQl0aW1lLnNsZWVwKDMpCgkJCWJhY2soKQoJCXRyeTpsaW4gPSBvcGVuKCdEVU1QLycrZ2VoLCdyJykucmVhZCgpLnNwbGl0bGluZXMoKQoJCWV4Y2VwdDoKCQkJcHJpbnQoJyAnKQoJCQl0aW1lLnNsZWVwKDIpCgkJCWJhY2soKQoJCWZvciB4aWQgaW4gbGluOgoJCQlpZC5hcHBlbmQoeGlkKQoJCXNldHRpbmcoKQoKZGVmIHNldHRpbmcoKToKCXByaW50KCcnKQoJY2V0YWsobmVsKGYie0gyfU00RjgyXzI0e00yfU9MRCBBQ0NzIHtQMn0ve0gyfSBORVcgQUNDcyB7UDJ9IC8ge0syfSBBTEx7UDJ9IFwwMzNbMTszNTs0MG0gQ0hPT1NFIEJSQUgge00yfTEge1AyfS97SDJ9IDIge1AyfS8ge0syfTN7UDJ9Iix3aWR0aD04MCxwYWRkaW5nPSgwLDcpLHN0eWxlPWYie2NvbG9yX3BhbmVsfSIpKSAKCXByaW50cyhmIiIie0syfSAgMS5PTEQgQUNDcwoyLk5FVyBBQ0NzCkFMTCIiIikKCWh1ID0gaW5wdXQoJ0NIT09TRSBPTkUgQlJBSDogJykKCWlmIGh1IGluIFsnMScsJ29sZCddOgoJCWZvciB0dWEgaW4gc29ydGVkKGlkKToKCQkJaWQyLmFwcGVuZCh0dWEpCgkJCQoJZWxpZiBodSBpbiBbJzInLCduZXcnXToKCQltdWRhPVtdCgkJZm9yIGJhY290IGluIHNvcnRlZChpZCk6CgkJCW11ZGEuYXBwZW5kKGJhY290KQoJCWJjbT1sZW4obXVkYSkKCQliY21pPShiY20tMSkKCQlmb3IgeG11ZCBpbiByYW5nZShiY20pOgoJCQlpZDIuYXBwZW5kKG11ZGFbYmNtaV0pCgkJCWJjbWkgLT0xCgllbGlmIGh1IGluIFsnMycsJ3JhbmRvbSddOgoJCWZvciBiYWNvdCBpbiBpZDoKCQkJeHggPSByYW5kb20ucmFuZGludCgwLGxlbihpZDIpKQoJCQlpZDIuaW5zZXJ0KHh4LGJhY290KQoJZWxzZToKCQlwcmludCgnQ0hPT1NFIEFHQUlOICcpCgkJZXhpdCgpCgkJcHJpbnQoJycpCgkJCglwcmludCgnJykKCXByaW50cyhuZWwoZicnJ1x0e0syfXtLMn0xe0syfSBNT0JJTEUgQVBQIChCRVNUKVx0e0syfTJ7SzJ9IE1FVEhPRCBNIEZBQ0VCT09LIFxuXHR7SzJ9M3tLMn0gTUVUSE9EIE1CQVNJQyInJycsd2lkdGg9ODAsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpIAoJaGMgPSBpbnB1dCgnICBcMDMzWzE7MzQ7NDBtIENIT09TRSAnKQoJaWYgaGMgaW4gWycxJywnMDEnXToKCQltZXRob2QuYXBwZW5kKCdtb2JpbGUnKQoJZWxpZiBoYyBpbiBbJzInLCcwMiddOgoJCW1ldGhvZC5hcHBlbmQoJ2ZyZWUnKQoJZWxpZiBoYyBpbiBbJzMnLCcwMyddOgoJCW1ldGhvZC5hcHBlbmQoJ21iYXNpYycpCgllbHNlOgoJCW1ldGhvZC5hcHBlbmQoJ21vYmlsZScpCglzdSgpIApkZWYgc3UoKToKCXByaW50cyhuZWwoZiJcdHtQMn1be0gyfTF7UDJ9XS4gIFBBU1MgWyB7SzJ9IChCRVNULSkge1AyfV1cblx0W3tIMn0ye1AyfV0uICBQQVNTIFsge00yfSgrKSIsd2lkdGg9ODAsc3R5bGU9ZiJ7Y29sb3JfcGFuZWx9IikpIAoJY2ggPSBpbnB1dCgnQ0hPT1NFIDogJykKCWlmIGNoIGluIFsnMScsJzAxJ106CgkJbWllKCkKCWVsaWYgY2ggaW4gWycyJywnMDInXToKCQlwYXNzdSgpCgllbHNlOgoJCXBhc3N1KCkKZGVmIG1pZSgpOgoJZ2xvYmFsIHByb2csZGVzCglwcmludCgnJykKCXByaW50KGYnT0t7eH0gU2F2ZSBpbiA6IHtofU1SIElUIE9LLyVzIHt4fSclKG9rYykpCglwcmludChmJ0NQe3h9IFNhdmUgaW4gOiB7a31NUklUIENQLyVzIHt4fSclKGNwYykpCglwcmludCgnJykgCglwcmludHMoZicgVVNFIEFJUlBMQU5FIE1PRCBGT1IgRVZFUlkgVVNFIFxuJykKCXByb2cgPSBQcm9ncmVzcyhTcGlubmVyQ29sdW1uKCdjbG9jaycpLFRleHRDb2x1bW4oJ3t0YXNrLmRlc2NyaXB0aW9ufScpLEJhckNvbHVtbigpLFRleHRDb2x1bW4oJ3t0YXNrLnBlcmNlbnRhZ2U6LjBmfSUnKSkKCWRlcyA9IHByb2cuYWRkX3Rhc2soJycsdG90YWw9bGVuKGlkKSkKCXdpdGggcHJvZzoKCQl3aXRoIHRyZWQobWF4X3dvcmtlcnM9MzApIGFzIHBvb2w6CgkJCWZvciB5dXpvbmcgaW4gaWQyOgoJCQkJaWRmLG5tZiA9IHl1em9uZy5zcGxpdCgnfCcpWzBdLHl1em9uZy5zcGxpdCgnfCcpWzFdLmxvd2VyKCkKCQkJCWZycyA9IG5tZi5zcGxpdCgnICcpWzBdCgkJCQlwd3YgPSBbXQoJCQkJaWYgbGVuKG5tZik8NjoKCQkJCQlpZiBsZW4oZnJzKTwzOgoJCQkJCQlwYXNzCgkJCQkJZWxzZToKCQkJCQkJcHd2LmFwcGVuZChubWYpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjMnKQoJCQkJCQlwd3YuYXBwZW5kKGZycytmcnMpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1NicpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0NTY3ODknKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDU2Nzg5MCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMicpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMTIyJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzMyMScpCgkJCQkJCXB3di5hcHBlbmQoZnJzKyc1NDMyMScpCgkJCQkJCXB3di5hcHBlbmQoJzEyMycrZnJzKycxMjMnKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0JytmcnMrJzEyMzQnKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0NScrZnJzKycxMjM0NScpCgkJCQkJCXB3di5hcHBlbmQoJzEyMycrZnJzKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0JytmcnMpCgkJCQkJCXB3di5hcHBlbmQoJzEyMzQ1JytmcnMpCgkJCQllbHNlOgoJCQkJCWlmIGxlbihmcnMpPDM6CgkJCQkJCXB3di5hcHBlbmQobm1mKQoJCQkJCWVsc2U6CgkJCQkJCXB3di5hcHBlbmQobm1mKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrZnJzKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0NScpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0NTYnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDU2Nzg5JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1Njc4OTAnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTInKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTEyMicpCgkJCQkJCXB3di5hcHBlbmQoZnJzKyczMjEnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnNTQzMjEnKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjMnK2ZycysnMTIzJykKCQkJCQkJcHd2LmFwcGVuZCgnMTIzNCcrZnJzKycxMjM0JykKCQkJCQkJcHd2LmFwcGVuZCgnMTIzNDUnK2ZycysnMTIzNDUnKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjMnK2ZycykKCQkJCQkJcHd2LmFwcGVuZCgnMTIzNCcrZnJzKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0NScrZnJzKQoJCQkJaWYgJ3lhJyBpbiBwd3BsdXNzOgoJCQkJCWZvciB4cHdkIGluIHB3bnlhOgoJCQkJCQlwd3YuYXBwZW5kKHhwd2QpCgkJCQllbHNlOnBhc3MKCQkJCWlmICdtb2JpbGUnIGluIG1ldGhvZDoKCQkJCQlwb29sLnN1Ym1pdChjcmFjayxpZGYscHd2KQoJCQkJZWxpZiAnZnJlZScgaW4gbWV0aG9kOgoJCQkJCXBvb2wuc3VibWl0KGNyYWNrZnJlZSxpZGYscHd2KQoJCQkJZWxpZiAnbWJhc2ljJyBpbiBtZXRob2Q6CgkJCQkJcG9vbC5zdWJtaXQoY3JhY2ttYmFzaWMsaWRmLHB3dikKCQkJCWVsc2U6CgkJCQkJcG9vbC5zdWJtaXQoY3JhY2ssaWRmLHB3dikKCQlwcmludCgnJykKCQljZXRhaygnIENyYWNrZWQgJXMgT2s6JXMgQ3A6JXMgJyUoKGxlbihpZCkpLG9rLGNwKSkKCQlwcmludCgnJykKZGVmIHBhc3N1KCk6CglnbG9iYWwgcHJvZyxkZXMKCXByaW50KCcnKQoJcHJpbnQoZidPS3t4fSBTYXZlIGluIDoge2h9TVIgSVQgT0svJXMge3h9JyUob2tjKSkKCXByaW50KGYnQ1B7eH0gU2F2ZSBpbiA6IHtrfU1SSVQgQ1AvJXMge3h9JyUoY3BjKSkKCXByaW50KCcnKSAKCXByaW50cyhmJyBVU0UgQUlSUExBTkUgTU9ERSBGT1IgRVZFUlkgVVNFXG4nKQoJcHJvZyA9IFByb2dyZXNzKFNwaW5uZXJDb2x1bW4oJ2Nsb2NrJyksVGV4dENvbHVtbigne3Rhc2suZGVzY3JpcHRpb259JyksQmFyQ29sdW1uKCksVGV4dENvbHVtbigne3Rhc2sucGVyY2VudGFnZTouMGZ9JScpKQoJZGVzID0gcHJvZy5hZGRfdGFzaygnJyx0b3RhbD1sZW4oaWQpKQoJd2l0aCBwcm9nOgoJCXdpdGggdHJlZChtYXhfd29ya2Vycz0zMCkgYXMgcG9vbDoKCQkJZm9yIHl1em9uZyBpbiBpZDI6CgkJCQlpZGYsbm1mID0geXV6b25nLnNwbGl0KCd8JylbMF0seXV6b25nLnNwbGl0KCd8JylbMV0ubG93ZXIoKQoJCQkJZnJzID0gbm1mLnNwbGl0KCcgJylbMF0KCQkJCXB3diA9IFtdCgkJCQlpZiBsZW4obm1mKTw2OgoJCQkJCWlmIGxlbihmcnMpPDM6CgkJCQkJCXBhc3MKCQkJCQllbHNlOgoJCQkJCQlwd3YuYXBwZW5kKG5tZikKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMycpCgkJCQkJCXB3di5hcHBlbmQoZnJzK2ZycykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDUnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDU2JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1Njc4OScpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0NTY3ODkwJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzExMjInKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMzIxJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzU0MzIxJykKCQkJCQkJcHd2LmFwcGVuZCgnMTIzJytmcnMrJzEyMycpCgkJCQkJCXB3di5hcHBlbmQoJzEyMzQnK2ZycysnMTIzNCcpCgkJCQkJCXB3di5hcHBlbmQoJzEyMzQ1JytmcnMrJzEyMzQ1JykKCQkJCQkJcHd2LmFwcGVuZCgnMTIzJytmcnMpCgkJCQkJCXB3di5hcHBlbmQoJzEyMzQnK2ZycykKCQkJCQkJcHd2LmFwcGVuZCgnMTIzNDUnK2ZycykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzIwMDUnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMjAwNCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycyMDAzJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzIwMDInKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMjAwMScpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycyMDAwJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzE5OTknKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTk5OCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxOTk3JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzE5OTYnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTk5NScpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxOTk0JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzE5OTMnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTk5MicpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxOTkxJykKCQkJCWVsc2U6CgkJCQkJaWYgbGVuKGZycyk8MzoKCQkJCQkJcHd2LmFwcGVuZChubWYpCgkJCQkJZWxzZToKCQkJCQkJcHd2LmFwcGVuZChubWYpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjMnKQoJCQkJCQlwd3YuYXBwZW5kKGZycytmcnMpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1NicpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0NTY3ODknKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDU2Nzg5MCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMicpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxMTIyJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzMyMScpCgkJCQkJCXB3di5hcHBlbmQoZnJzKyc1NDMyMScpCgkJCQkJCXB3di5hcHBlbmQoJzEyMycrZnJzKycxMjMnKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0JytmcnMrJzEyMzQnKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0NScrZnJzKycxMjM0NScpCgkJCQkJCXB3di5hcHBlbmQoJzEyMycrZnJzKQoJCQkJCQlwd3YuYXBwZW5kKCcxMjM0JytmcnMpCgkJCQkJCXB3di5hcHBlbmQoJzEyMzQ1JytmcnMpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycyMDA1JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzIwMDQnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMjAwMycpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycyMDAyJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzIwMDEnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMjAwMCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxOTk5JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzE5OTgnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTk5NycpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxOTk2JykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzE5OTUnKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTk5NCcpCgkJCQkJCXB3di5hcHBlbmQoZnJzKycxOTkzJykKCQkJCQkJcHd2LmFwcGVuZChmcnMrJzE5OTInKQoJCQkJCQlwd3YuYXBwZW5kKGZycysnMTk5MScpCgkJCQlpZiAneWEnIGluIHB3cGx1c3M6CgkJCQkJZm9yIHhwd2QgaW4gcHdueWE6CgkJCQkJCXB3di5hcHBlbmQoeHB3ZCkKCQkJCWVsc2U6cGFzcwoJCQkJaWYgJ21vYmlsZScgaW4gbWV0aG9kOgoJCQkJCXBvb2wuc3VibWl0KGNyYWNrLGlkZixwd3YpCgkJCQllbGlmICdmcmVlJyBpbiBtZXRob2Q6CgkJCQkJcG9vbC5zdWJtaXQoY3JhY2tmcmVlLGlkZixwd3YpCgkJCQllbGlmICdtYmFzaWMnIGluIG1ldGhvZDoKCQkJCQlwb29sLnN1Ym1pdChjcmFja21iYXNpYyxpZGYscHd2KQoJCQkJZWxzZToKCQkJCQlwb29sLnN1Ym1pdChjcmFjayxpZGYscHd2KQoJCXByaW50KCcnKQoJCWNldGFrKCcgQ3JhY2tlZCAlcyBPazolcyBDcDolcyAnJSgobGVuKGlkKSksb2ssY3ApKQoJCXByaW50KCcnKQpkZWYgY3JhY2soaWRmLHB3dik6CglnbG9iYWwgbG9vcCxvayxjcAoJYmkgPSByYW5kb20uY2hvaWNlKFsnXDMzW20nXSkKCXBlcnMgPSBsb29wKjEwMC9sZW4oaWQyKQoJZmZmID0gJyUnCglwcm9nLnVwZGF0ZShkZXMsZGVzY3JpcHRpb249ZidccltkZWVwX3doaXRlXSAgeyhsb29wKX0ve2xlbihpZCl9Wy9dIFtncmVlbl1PS1svXTpbZ3JlZW5deyhvayl9IFsvXT1beWVsbG93XSBDUFsvXTpbeWVsbG93XXsoY3ApfScpCglwcm9nLmFkdmFuY2UoZGVzKQoJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCgl1YSA9IHJhbmRvbS5jaG9pY2UodWdlbikKCXVhMiA9IHJhbmRvbS5jaG9pY2UodWdlbjIpCglmb3IgcHcgaW4gcHd2OgoJCXRyeToKCQkJc2VzLmhlYWRlcnMudXBkYXRlKHsnSG9zdCc6ICdtLmZhY2Vib29rLmNvbScsJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsJ3VzZXItYWdlbnQnOiB1YSwnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsJ3NlYy1mZXRjaC1zaXRlJzogJ3NhbWUtb3JpZ2luJywnc2VjLWZldGNoLW1vZGUnOiAnY29ycycsJ3NlYy1mZXRjaC1kZXN0JzogJ2VtcHR5JywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43J30pCgkJCXAgPSBzZXMuZ2V0KCdodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luLnBocD9za2lwX2FwaV9sb2dpbj0xJmFwaV9rZXk9MjIyMTYxOTM3ODEzMjgwJmtpZF9kaXJlY3RlZF9zaXRlPTAmYXBwX2lkPTIyMjE2MTkzNzgxMzI4MCZzaWduZWRfbmV4dD0xJm5leHQ9aHR0cHMlM0ElMkYlMkZ3d3cuZmFjZWJvb2suY29tJTJGZGlhbG9nJTJGb2F1dGglM0ZyZXNwb25zZV90eXBlJTNEY29kZSUyNmNsaWVudF9pZCUzRDIyMjE2MTkzNzgxMzI4MCUyNnJlZGlyZWN0X3VyaSUzRGh0dHBzJTI1M0ElMjUyRiUyNTJGYWNjb3VudC54aWFvbWkuY29tJTI1MkZwYXNzJTI1MkZzbnMlMjUyRmxvZ2luJTI1MkZsb2FkJTI2c3RhdGUlM0RTVEFURV8yNDgyMjIlMjZzY29wZSUzRGVtYWlsJTI2cmV0JTNEbG9naW4lMjZmYmFwcF9wcmVzJTNEMCUyNmxvZ2dlcl9pZCUzRDExNjk5NDQyLWNlOGUtNGQ2OS04OTUyLWZiNWY2YjBjM2QxMiUyNnRwJTNEdW5zcGVjaWZpZWQmY2FuY2VsX3VybD1odHRwcyUzQSUyRiUyRmFjY291bnQueGlhb21pLmNvbSUyRnBhc3MlMkZzbnMlMkZsb2dpbiUyRmxvYWQlM0ZlcnJvciUzRGFjY2Vzc19kZW5pZWQlMjZlcnJvcl9jb2RlJTNEMjAwJTI2ZXJyb3JfZGVzY3JpcHRpb24lM0RQZXJtaXNzaW9ucyUyQmVycm9yJTI2ZXJyb3JfcmVhc29uJTNEdXNlcl9kZW5pZWQlMjZzdGF0ZSUzRFNUQVRFXzI0ODIyMiUyM18lM0RfJmRpc3BsYXk9cGFnZSZsb2NhbGU9aWRfSUQmcGxfZGJsPTAmX3JkYz0xJl9yZHInKQoJCQlkYXRhYSA9eyJsc2QiOnJlLnNlYXJjaCgnbmFtZT0ibHNkIiB2YWx1ZT0iKC4qPykiJywgc3RyKHAudGV4dCkpLmdyb3VwKDEpLCJqYXpvZXN0IjpyZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIocC50ZXh0KSkuZ3JvdXAoMSksInVpZCI6aWRmLCJuZXh0IjoiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS92Mi4zL2RpYWxvZy9vYXV0aD9hcHBfaWQ9MTI0MDI0NTc0Mjg3NDE0JmNidD0xNjUxNjU4MjAwOTc4JmUyZT0lN0IlMjJpbml0JTIyJTNBMTY1MTY1ODIwMDk3OCU3RCZzc289Y2hyb21lX2N1c3RvbV90YWImc2NvcGU9ZW1haWwmc3RhdGU9JTdCJTIyMF9hdXRoX2xvZ2dlcl9pZCUyMiUzQSUyMjY4ZjE1YmFlLTIzZjgtNDYzYy04NjYwLTVjZjEyMjZkOTdmNiUyMiUyQyUyMjdfY2hhbGxlbmdlJTIyJTNBJTIyZGFoajI4aHF0aWV0bWhyZ3BycHAlMjIlMkMlMjIzX21ldGhvZCUyMiUzQSUyMmN1c3RvbV90YWIlMjIlN0QmcmVkaXJlY3RfdXJpPWZiY29ubmVjdCUzQSUyRiUyRmNjdC5jb20uaW5zdGF0aHVuZGVyLmFwcCZyZXNwb25zZV90eXBlPXRva2VuJTJDc2lnbmVkX3JlcXVlc3QlMkNncmFwaF9kb21haW4lMkNncmFudGVkX3Njb3BlcyZyZXR1cm5fc2NvcGVzPXRydWUmcmV0PWxvZ2luJmZiYXBwX3ByZXM9MCZsb2dnZXJfaWQ9NjhmMTViYWUtMjNmOC00NjNjLTg2NjAtNWNmMTIyNmQ5N2Y2JnRwPXVuc3BlY2lmaWVkIiwiZmxvdyI6ImxvZ2luX25vX3BpbiIsInBhc3MiOnB3LH0KCQkJa29raSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHAuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkKCQkJa29raSs9JyBtX3BpeGVsX3JhdGlvPTIuNjI1OyB3ZD00MTJ4NzU2JwoJCQloZWFkZT17J0hvc3QnOiAnbS5mYWNlYm9vay5jb20nLCdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsJ3NlYy1jaC11YSc6ICciIE5vdCBBO0JyYW5kIjt2PSI5OSIsICJDaHJvbWl1bSI7dj0iOTgiJywnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3NlYy1jaC11YS1wbGF0Zm9ybSc6ICciQW5kcm9pZCInLCd1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzJzogJzEnLCdvcmlnaW4nOiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbScsJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCd1c2VyLWFnZW50JzogdWEsJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLCd4LXJlcXVlc3RlZC13aXRoJzogJ1hNTEh0dHBSZXF1ZXN0Jywnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLCdzZWMtZmV0Y2gtbW9kZSc6ICdjb3JzJywnc2VjLWZldGNoLWRlc3QnOiAnZW1wdHknLCdyZWZlcmVyJzogJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3Bhc3N3b3JkLz91aWQ9JytpZGYrJyZmbG93PWxvZ2luX25vX3BpbiZuZXh0PWh0dHBzJTNBJTJGJTJGbS5mYWNlYm9vay5jb20lMkZ2Mi4zJTJGZGlhbG9nJTJGb2F1dGglM0ZhcHBfaWQlM0QxMjQwMjQ1NzQyODc0MTQlMjZjYnQlM0QxNjUxNjU4MjAwOTc4JTI2ZTJlJTNEJTI1N0IlMjUyMmluaXQlMjUyMiUyNTNBMTY1MTY1ODIwMDk3OCUyNTdEJTI2c3NvJTNEY2hyb21lX2N1c3RvbV90YWIlMjZzY29wZSUzRGVtYWlsJTI2c3RhdGUlM0QlMjU3QiUyNTIyMF9hdXRoX2xvZ2dlcl9pZCUyNTIyJTI1M0ElMjUyMjY4ZjE1YmFlLTIzZjgtNDYzYy04NjYwLTVjZjEyMjZkOTdmNiUyNTIyJTI1MkMlMjUyMjdfY2hhbGxlbmdlJTI1MjIlMjUzQSUyNTIyZGFoajI4aHF0aWV0bWhyZ3BycHAlMjUyMiUyNTJDJTI1MjIzX21ldGhvZCUyNTIyJTI1M0ElMjUyMmN1c3RvbV90YWIlMjUyMiUyNTdEJTI2cmVkaXJlY3RfdXJpJTNEZmJjb25uZWN0JTI1M0ElMjUyRiUyNTJGY2N0LmNvbS5pbnN0YXRodW5kZXIuYXBwJTI2cmVzcG9uc2VfdHlwZSUzRHRva2VuJTI1MkNzaWduZWRfcmVxdWVzdCUyNTJDZ3JhcGhfZG9tYWluJTI1MkNncmFudGVkX3Njb3BlcyUyNnJldHVybl9zY29wZXMlM0R0cnVlJTI2cmV0JTNEbG9naW4lMjZmYmFwcF9wcmVzJTNEMCUyNmxvZ2dlcl9pZCUzRDY4ZjE1YmFlLTIzZjgtNDYzYy04NjYwLTVjZjEyMjZkOTdmNiUyNnRwJTNEdW5zcGVjaWZpZWQmY2FuY2VsX3VybD1mYmNvbm5lY3QlM0ElMkYlMkZjY3QuY29tLmluc3RhdGh1bmRlci5hcHAlM0ZlcnJvciUzRGFjY2Vzc19kZW5pZWQlMjZlcnJvcl9jb2RlJTNEMjAwJTI2ZXJyb3JfZGVzY3JpcHRpb24lM0RQZXJtaXNzaW9ucyUyQmVycm9yJTI2ZXJyb3JfcmVhc29uJTNEdXNlcl9kZW5pZWQlMjZzdGF0ZSUzRCUyNTdCJTI1MjIwX2F1dGhfbG9nZ2VyX2lkJTI1MjIlMjUzQSUyNTIyNjhmMTViYWUtMjNmOC00NjNjLTg2NjAtNWNmMTIyNmQ5N2Y2JTI1MjIlMjUyQyUyNTIyN19jaGFsbGVuZ2UlMjUyMiUyNTNBJTI1MjJkYWhqMjhocXRpZXRtaHJncHJwcCUyNTIyJTI1MkMlMjUyMjNfbWV0aG9kJTI1MjIlMjUzQSUyNTIyY3VzdG9tX3RhYiUyNTIyJTI1N0QmZGlzcGxheT10b3VjaCZsb2NhbGU9aWRfSUQmcGxfZGJsPTAmcmVmc3JjPWRlcHJlY2F0ZWQmX3JkcicsJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlLCBicicsJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyd9CgkJCXBvID0gc2VzLnBvc3QoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3ZhbGlkYXRlLXBhc3N3b3JkLz9zaGJsPTAmbG9jYWxlMj1pZF9JRCcsZGF0YT1kYXRhYSxjb29raWVzPXsnY29va2llJzoga29raX0saGVhZGVycz1oZWFkZSxhbGxvd19yZWRpcmVjdHM9RmFsc2UpCgkJCWlmICJjaGVja3BvaW50IiBpbiBwby5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQkJcHJpbnQoZidDUCAgOiB7a2t9e2lkZn17UH0gXG7ilIIgICAgOiB7a2t9e3B3fXtQfVxuICA6IHtra317dWF9e1B9ICcpCgkJCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCWFrdW4uYXBwZW5kKGlkZisnfCcrcHcpCgkJCQljcCs9MQoJCQkJYnJlYWsKCQkJZWxpZiAiY191c2VyIiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToKCQkJCW9rKz0xCgkJCQljb2tpPXBvLmNvb2tpZXMuZ2V0X2RpY3QoKQoJCQkJa3VraSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQoJCQkJcHJpbnQoZidhTVIgSVQgT0sgIDoge2hofXtpZGZ9e1B9IFxuIE1SSVQgT0sgICA6IHtoaH17cHd9IHtQfVxuIENPT0tJRVMgOiB7aGh9e2t1a2l9e1B9JykKCQkJCW9wZW4oJ09LLycrb2tjLCdhJykud3JpdGUoaWRmKyd8JytwdysnXG4nKQoJCQkJYnJlYWsKCQkJZWxzZToKCQkJCWNvbnRpbnVlCgkJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCQl0aW1lLnNsZWVwKDMpCglsb29wKz0xCmRlZiBjcmFja2ZyZWUoaWRmLHB3dik6CglnbG9iYWwgbG9vcCxvayxjcAoJYmkgPSByYW5kb20uY2hvaWNlKFsnXDMzW20nXSkKCXBlcnMgPSBsb29wKjEwMC9sZW4oaWQyKQoJZmZmID0gJyUnCglwcm9nLnVwZGF0ZShkZXMsZGVzY3JpcHRpb249ZidccltkZWVwX3doaXRlXSAgeyhsb29wKX0ve2xlbihpZCl9Wy9dIFtncmVlbl1PS1svXTpbZ3JlZW5deyhvayl9IFsvXT1beWVsbG93XSBDUFsvXTpbeWVsbG93XXsoY3ApfScpCglwcm9nLmFkdmFuY2UoZGVzKQoJdWEgPSByYW5kb20uY2hvaWNlKHVnZW4pCgl1YTIgPSByYW5kb20uY2hvaWNlKHVnZW4yKQoJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCglmb3IgcHcgaW4gcHd2OgoJCXRyeToKCQkJc2VzLmhlYWRlcnMudXBkYXRlKHsnSG9zdCc6ICdtLmZhY2Vib29rLmNvbScsJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsJ3VzZXItYWdlbnQnOiB1YSwnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsJ3NlYy1mZXRjaC1zaXRlJzogJ3NhbWUtb3JpZ2luJywnc2VjLWZldGNoLW1vZGUnOiAnY3JvcycsJ3NlYy1mZXRjaC1kZXN0JzogJ2VtcHR5JywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43J30pCgkJCXAgPSBzZXMuZ2V0KCdodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9wYXNzd29yZC8/dWlkPScraWRmKycmZmxvdz1sb2dpbl9ub19waW4mcmVmc3JjPWRlcHJlY2F0ZWQmX3JkcicpCgkJCWRhdGFhID17ImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBzdHIocC50ZXh0KSkuZ3JvdXAoMSksImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihwLnRleHQpKS5ncm91cCgxKSwidWlkIjppZGYsIm5leHQiOiJodHRwczovL20uZmFjZWJvb2suY29tLz9zdHlwZT1sbyZqbG91PUFmZUhrLUNBSnZkR2FIazRqclBHNVV0Rm40Q0tIdGlyN2ZqZGRDMVluMGtNRDduMUtjdF9ObEhwNElMYW5ZTGl1T01IZXJFQklhQUFHWnBxSXJvbkhZb0xLWDJiM1o0Sl8yb3JrelVlelBGRlB3JnNtdWg9NDY0NiZsaD1BY185NGwyUkZjLXZzMzB4TmJnJl9yZHIiLCJmbG93IjoibG9naW5fbm9fcGluIiwicGFzcyI6cHcsfQoJCQlrb2tpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gcC5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQoJCQlrb2tpKz0nIG1fcGl4ZWxfcmF0aW89Mi42MjU7IHdkPTQxMng3NTYnCgkJCWhlYWRlPXsnSG9zdCc6ICdtLmZhY2Vib29rLmNvbScsJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6ICcxJywndXNlci1hZ2VudCc6IHVhLCdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45Jywnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLCdzZWMtZmV0Y2gtbW9kZSc6ICduYXZpZ2F0ZScsJ3NlYy1mZXRjaC11c2VyJzogJz8xJywnc2VjLWZldGNoLWRlc3QnOiAnZG9jdW1lbnQnLCdzZWMtY2gtdWEnOiAnIkdvb2dsZSBDaHJvbWUiO3Y9IjEwNyIsICJDaHJvbWl1bSI7dj0iMTA3IiwgIk5vdD1BP0JyYW5kIjt2PSI4IicsJ3NlYy1jaC11YS1tb2JpbGUnOiAnPzEnLCdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIkFuZHJvaWQiJywncmVmZXJlcic6ICdodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9wYXNzd29yZC8/dWlkPScraWRmKycmZmxvdz1sb2dpbl9ub19waW4mcmVmc3JjPWRlcHJlY2F0ZWQmX3JkcicsJ2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlLCBicicsJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyd9CgkJCXBvID0gc2VzLnBvc3QoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3ZhbGlkYXRlLXBhc3N3b3JkLz9zaGJsPTAnLGRhdGE9ZGF0YWEsY29va2llcz17J2Nvb2tpZSc6IGtva2l9LGhlYWRlcnM9aGVhZGUsYWxsb3dfcmVkaXJlY3RzPUZhbHNlKQoJCQlpZiAiY2hlY2twb2ludCIgaW4gcG8uY29va2llcy5nZXRfZGljdCgpLmtleXMoKToKCQkJCXByaW50KGYnSURzIDoge2trfXtpZGZ9e1B9IFxuWytdUEFTU1dPUkQgOiB7a2t9e3B3fXtQfVxuWytdQ09PS0lFUyAgOiB7a2t9e1B9ICcpCgkJCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCWFrdW4uYXBwZW5kKGlkZisnfCcrcHcpCgkJCQkKCQkJCWNwKz0xCgkJCQlicmVhawoJCQllbGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgoJCQkJb2srPTEKCQkJCWNva2k9cG8uY29va2llcy5nZXRfZGljdCgpCgkJCQlrdWtpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pCgkJCQlwcmludChmJ0lEcyA6IHtoaH17aWRmfXtQfSBcblsrXVBBU1NXT1JEIDoge2hofXtwd30ge1B9XG5bK11DT09LSUVTIDoge2hofXtrdWtpfXtQfScpCgkJCQlvcGVuKCdPSy8nK29rYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCQoJCQkJCgkJCQlicmVhawoJCQkJCgkJCWVsc2U6CgkJCQljb250aW51ZQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJdGltZS5zbGVlcCgzKQoJbG9vcCs9MQpkZWYgZ2V0a2V5KCk6CiAgICBpbXBvcnQganNvbiwgcmVxdWVzdHMKICAgIHRyeToKICAgICAgICBvcGVua2V5ID0gb3BlbigiLmtleS50eHQiLCJyIikucmVhZCgpCiAgICAgICAgZmlsZXMgPSBvcGVua2V5LnNwbGl0KCJcbiIpWzFdCiAgICAgICAga2V5ID0gb3BlbmtleS5zcGxpdCgiXG4iKVswXQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIG5vbmUoKTt0aW1lLnNsZWVwKDEpCiAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgcHJpbnQoIlwwMzNbMTszNTs0MG0gUHJvZ3JhbW1lciBNNEY4Ml8yNCIpCiAgICAgICAgd2ViYnJvd3Nlci5vcGVuKCdodHRwczovL3QubWUvbTRmODJfMjQnKTt0aW1lLnNsZWVwKDIpCiAgICAgICAgcHJpbnQgKCIiKQogICAgICAgIE1yaVQoIlwwMzNbMG06XDAzM1szMm0gIitjcm90KTt0aW1lLnNsZWVwKDEpCiAgICAgICAgbmFtYW11ID0gaW5wdXQoIk1SSVQgIikKICAgICAgICB5dCA9IGlucHV0KCJNUklUICIpCiAgICAgICAgaWYgeXQgaW4gWyJZIiwieSJdOgogICAgICAgICAgICBvcy5zeXN0ZW0oInhkZy1vcGVuIGh0dHBzOi8vd2EubWUvKzYyODEzMjI1NDQzOTE/dGV4dD1Bc3NhbGFtdWFsYWlrdW0rYmFuZytNcmlULCtha3UrbWF1K2JlbGkrc2NyaXB0bnlhK3RhcGkreWFuZyt2ZXJzaStwcmVtaXVtLitJbmkrbGlzZW5zaW55YTolMjAiK2Nyb3QrIitrb25maXRtYXNpK25hbWErcGVtYmVsaTolMjAiK25hbWFtdSkKICAgICAgICAgICAgb3BlbigiLmtleS50eHQiLCJ3Iikud3JpdGUoY3JvdCsiXG4iK25hbWFtdSkKICAgICAgICAgICAgZXhpdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZXhpdCgiXDAzM1swbSIpCiAgICB0cnk6CiAgICAgICAgY29uZmlybWtleSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3ByaXZhdGVzY3JpcC9kYXRhYmFzZS9tYWluL3lhLmpzb24iKS5qc29uKCkKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICBwcmludCgiXDAzM1swbUJBRCBJTlRFUk5FVCIpO2V4aXQoKQogICAgaWYgY29uZmlybWtleVtmaWxlc10gPT0ga2V5OgogICAgICAgIGlmIGNvbmZpcm1rZXlbZmlsZXNdID09ICJ0aWRha2FkYSI6CiAgICAgICAgICAgIHByaW50KCJcblwwMzNbMG0iKQogICAgICAgICAgICBvcy5zeXN0ZW0oInJtIC1yZiAua2V5LnR4dCIpO2V4aXQoKQogICAgICAgIGVsc2U6CiAgICAgICAgCXByaW50KCJcblwwMzNbMG0iKTt0aW1lLnNsZWVwKDEpO2xvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIlxuXDAzM1swbSIpCiAgICAgICAgb3Muc3lzdGVtKCJybSAtcmYgLmtleS50eHQiKTtleGl0KCkKCmltcG9ydCByZXF1ZXN0cywgc2h1dGlsLCBvcywgcmUsIGJzNCwgc3lzLCBqc29uLCB0aW1lLCBwbGF0Zm9ybSAscmFuZG9tLCBkYXRldGltZSwgc3VicHJvY2VzcywgbG9nZ2luZywgYmFzZTY0CmltcG9ydCBobWFjLCBoYXNobGliLCB1cmxsaWIsIHN0ZGlvbWFzaywgdXJsbGliLnJlcXVlc3QsIHV1aWQKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvcgpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXJzZXIKZnJvbSB0aHJlYWRpbmcgaW1wb3J0IChUaHJlYWQsIEV2ZW50KQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwIGFzIGplZGEKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKCmN0ID0gZGF0ZXRpbWUubm93KCkKbiA9IGN0Lm1vbnRoCmJ1bGFuXyA9IFsnSmFudWFyaScsICdGZWJydWFyaScsICdNYXJldCcsICdBcHJpbCcsICdNZWknLCAnSnVuaScsICdKdWxpJywgJ0FndXN0dXMnLCAnU2VwdGVtYmVyJywgJ09rdG9iZXInLCAnTm92ZW1iZXInLCAnRGVzZW1iZXInXQp0cnk6CglpZiBuIDwgMCBvciBuID4gMTI6CgkJZXhpdCgpCgluVGVtcCA9IG4gLSAxCmV4Y2VwdCBWYWx1ZUVycm9yOgoJZXhpdCgpCgpjdXJyZW50ID0gZGF0ZXRpbWUubm93KCkKaGFyaSA9IGN1cnJlbnQuZGF5CmJ1bGFuID0gYnVsYW5fW25UZW1wXQp0YWh1biA9IGN1cnJlbnQueWVhcgpidWxsYW4gPSBjdXJyZW50Lm1vbnRoCgp3YWt0dSA9ICgiJXMtJXMtJXMiJShoYXJpLGJ1bGFuLHRhaHVuKSkKYnVsYW4xMiA9IHsiMDEiOiAiSmFudWFyaSIsICIwMiI6ICJGZWJydWFyaSIsICIwMyI6ICJNYXJldCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNZWkiLCAiMDYiOiAiSnVuaSIsICIwNyI6ICJKdWxpIiwgIjA4IjogIkFndXN0dXMiLCAiMDkiOiAiU2VwdGVtYmVyIiwgIjEwIjogIk9rdG9iZXIiLCAiMTEiOiAiTm92ZW1iZXIiLCAiMTIiOiAiRGVzZW1iZXIifQoKTSA9ICdceDFiWzE7OTFtJyAKSCA9ICdceDFiWzE7OTJtJyAKSyA9ICdceDFiWzE7OTNtJyAKQiA9ICdceDFiWzE7OTRtJyAKVSA9ICdceDFiWzE7OTVtJyAKTyA9ICdceDFiWzE7OTZtJyAKUCA9ICdceDFiWzE7OTdtJyAKSiA9ICdcMDMzWzM4OzI7MjU1OzEyNzswOzFtJyAKTiA9ICdceDFiWzBtJyAKYWNhayA9IFtNLCBILCBLLCBCLCBVLCBPLCBQLCBKXQp3YXJuYSA9IHJhbmRvbS5jaG9pY2UoYWNhaykKdGlsID0iXDAzM1swbeKVsOKUgCAiCgpkZWYgTXJpVChrZWxpbGluZyk6Cglmb3IgbWF1IGluIGtlbGlsaW5nICsgJ1xuJzoKCQlzeXMuc3Rkb3V0LndyaXRlKG1hdSkKCQlzeXMuc3Rkb3V0LmZsdXNoKCk7amVkYSgwLjAzKQoJCQoJCQp1YmFoX3Bhc3MgPSBbXQpwd2JhcnUgPSBbXQpwd0JhcnUgPSBbXQp1YmFoUCA9IFtdCgpkZWYgZmlsZV9jcCgpOgoJZGlycyA9IG9zLmxpc3RkaXIoJ0NQJykKCXByaW50ICgiJXMlcyVzIFslc1wwMzNbMG0gXDAzM1swbSAlc11cbiIlKFUsdGlsLE8sVSxPKSkKCWZvciBmaWxlIGluIGRpcnM6CgkJcHJpbnQoIiVzJXNcMDMzWzBtJXMiJShVLHRpbCxmaWxlKSk7amVkYSgwLjA3KQoJdHJ5OgoJCXByaW50KCJcbiVzJXMlc1wwMzNbMG0gWyBjdGglczogJXNDUC0lcy50eHQlcyBdIiUoVSx0aWwsTyxNLEssd2FrdHUsTykpCgkJb3BzaSgpCglleGNlcHQgSU9FcnJvcjoKCQlwcmludCAoJyVzJXMgXDAzM1swbSclKE0sdGlsKSkKCQlleGl0KCkKCmRlZiBvcHNpKCk6CglDUCA9ICgiQ1AvIikKCXJvbWkgPSBpbnB1dCgiJXMlcyVzIFwwMzNbMG1GSUxFIE5BTUUgJXM+ICVzIiUoVSx0aWwsTyxNLEspKQoJaWYgcm9taSA9PSAiIjoKCQlwcmludCgiJXMlcyBcMDMzWzBtaXNpICAiJShNLHRpbCkpO2plZGEoMikKCQlvcHNpKCkKCXRyeToKCQlmaWxlX2NwID0gb3BlbihDUCtyb21pLCAiciIpLnJlYWRsaW5lcygpCglleGNlcHQgSU9FcnJvcjoKCQlleGl0KCJcbiVzJXMgXDAzM1swbUZJTEUgTkFNRSAlc1wwMzNbMG0gIiUoTSx0aWwscm9taSkpCglNcmlUKCIlcyVzJXNcMDMzWzBtIiUoVSx0aWwsTykpCglwdz1pbnB1dCgiXG4lcyVzJXMgXDAzM1swJXM+ICVzIiUoVSx0aWwsTyxNLEspKQoJaWYgcHcgaW5bJ3knLCdZJ106CgkJdWJhaF9wYXNzLmFwcGVuZCgidWJhaF9zYW5kaSIpCgkJcHcyID0gaW5wdXQoIiVzJXMlcyBcMDMzWzBtJXM+ICVzIiUoVSx0aWwsTyxNLEspKQoJCWlmIGxlbihwdzIpIDw9IDU6CgkJCXByaW50KCIlcyVzICAiJShNLHRpbCkpCgkJZWxzZToKCQkJcHdiYXJ1LmFwcGVuZChwdzIpCglwcmludCgiXG4gJXMjICVzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAlcyMiJShQLE0sUCkpO2plZGEoMikKCXByaW50ICgiJXMlcyVzXDAzM1swbSAlczogJXMlcyAiJShVLHRpbCxPLE0sSyxzdHIobGVuKGZpbGVfY3ApKSkpCglwcmludCgiICVzIyAlcy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJXMjIiUoUCxNLFApKTtqZWRhKDIpCglub21vciA9IDAKCWZvciBmYiBpbiBmaWxlX2NwOgoJCWFrdW4gPSBmYi5yZXBsYWNlKCJcbiIsIiIpCgkJbmdlY2VrICA9IGFrdW4uc3BsaXQoInwiKQoJCW5vbW9yKz0xCgkJcHJpbnQoIlxuJXMlcy4lcyBcMDMzWzBtJXM+ICVzJXMiJShILHN0cihub21vciksTyxNLEssYWt1bi5yZXBsYWNlKCIgKi0tPiAiLCIiKSkpO2plZGEoMC4wNykKCQl0cnk6CgkJCW1lbmdlY2VrKG5nZWNla1swXS5yZXBsYWNlKCIiLCIiKSwgbmdlY2VrWzFdKQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJY29udGludWUKCXByaW50KCJcbiVzJXMlcyBcMDMzWzBtIiUoVSx0aWwsTykpO2plZGEoMC4wNykKCWlucHV0KCclcyVzJXMgWyVzIEVudGVyJXMgXSAnJShVLHRpbCxPLFUsTykpCgliYWNrKCkKCQpkYXRhID0ge30KZGF0YTIgPSB7fQoKZGVmIG1lbmdlY2VrKHVzZXIscHcpOgoJZ2xvYmFsIGxvb3AsdWJhaF9wYXNzLHB3YmFydQoJc2Vzc2lvbj1yZXF1ZXN0cy5TZXNzaW9uKCkKCXVhID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgUzQ1QikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzk2LjAuNDY2NC40NSBNb2JpbGUgU2FmYXJpLzUzNy4zNicKCXVybCA9ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iCglzZXNzaW9uLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCJvcmlnaW4iOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIiwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsInVzZXItYWdlbnQiOiB1YSwiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLCJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLCJzZWMtZmV0Y2gtbW9kZSI6ICJuYXZpZ2F0ZSIsInNlYy1mZXRjaC11c2VyIjogIj8xIiwic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLCJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyJ9KQoJc291cD1iczQuQmVhdXRpZnVsU291cChzZXNzaW9uLmdldCh1cmwrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiKS50ZXh0LCJodG1sLnBhcnNlciIpCglsaW5rPXNvdXAuZmluZCgiZm9ybSIseyJtZXRob2QiOiJwb3N0In0pCglmb3IgeCBpbiBzb3VwKCJpbnB1dCIpOgoJCWRhdGEudXBkYXRlKHt4LmdldCgibmFtZSIpOnguZ2V0KCJ2YWx1ZSIpfSkKCWRhdGEudXBkYXRlKHsiZW1haWwiOnVzZXIsInBhc3MiOnB3fSkKCXVybFBvc3Q9c2Vzc2lvbi5wb3N0KHVybCtsaW5rLmdldCgiYWN0aW9uIiksZGF0YT1kYXRhKQoJcmVzcG9uc2U9YnM0LkJlYXV0aWZ1bFNvdXAodXJsUG9zdC50ZXh0LCAiaHRtbC5wYXJzZXIiKQoJaWYgImNfdXNlciIgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6CgkJaWYgIkFrdW4gQW5kYSBEaWt1bmNpIiBpbiB1cmxQb3N0LnRleHQ6CgkJCXByaW50KCJcciVzJXNcMDMzWzBtICIlKE0sdGlsKSkKCQllbHNlOgoJCQlwcmludCgiXHIlcyVzXDAzM1swbSAsICAiJSh0aWwsSCkpCgkJCW9wZW4oJ09LL09LLSVzLnR4dCclKHdha3R1KSwgJ2EnKS53cml0ZSgiICVzfCVzXG4iICUgKHVzZXIscHcpKQoJZWxpZiAiY2hlY2twb2ludCIgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6CgkJY29raSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkKCQl0aXRsZT1yZS5maW5kYWxsKCJcPHRpdGxlPiguKj8pPFwvdGl0bGU+IixzdHIocmVzcG9uc2UpKQoJCWxpbmsyPXJlc3BvbnNlLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQoJCWxpc3RJbnB1dD1bJ2ZiX2R0c2cnLCdqYXpvZXN0JywnY2hlY2twb2ludF9kYXRhJywnc3VibWl0W0NvbnRpbnVlXScsJ25oJ10KCQlmb3IgeCBpbiByZXNwb25zZSgiaW5wdXQiKToKCQkJaWYgeC5nZXQoIm5hbWUiKSBpbiBsaXN0SW5wdXQ6CgkJCQlkYXRhMi51cGRhdGUoe3guZ2V0KCJuYW1lIik6eC5nZXQoInZhbHVlIil9KQoJCWFuPXNlc3Npb24ucG9zdCh1cmwrbGluazIuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdGEyKQoJCXJlc3BvbnNlMj1iczQuQmVhdXRpZnVsU291cChhbi50ZXh0LCJodG1sLnBhcnNlciIpCgkJY2VrPVtjZWsudGV4dCBmb3IgY2VrIGluIHJlc3BvbnNlMi5maW5kX2FsbCgib3B0aW9uIildCgkJbnVtYmVyPTAKCQlwcmludCgiXHIlcyVzIFwwMzNbMCAlcyVzJXMgXDAzM1swbW9wc2kgJXM6IiUoVSxPLFAsc3RyKGxlbihjZWspKSxPLE0pKTtqZWRhKDAuMDcpCgkJaWYobGVuKGNlayk9PTApOgoJCQlpZiAiayIgaW4gdGl0bGU6CgkJCQlpZiAidWJhaF9zYW5kaSIgaW4gdWJhaF9wYXNzOgoJCQkJCWRhdCxkYXQyPXt9LHt9CgkJCQkJYnV0PVsic3VibWl0W1llc10iLCJuaCIsImZiX2R0c2ciLCJqYXpvZXN0IiwiY2hlY2twb2ludF9kYXRhIl0KCQkJCQlmb3IgeCBpbiByZXNwb25zZSgiaW5wdXQiKToKCQkJCQkJaWYgeC5nZXQoIm5hbWUiKSBpbiBidXQ6CgkJCQkJCQlkYXQudXBkYXRlKHt4LmdldCgibmFtZSIpOnguZ2V0KCJ2YWx1ZSIpfSkKCQkJCQl1YmFoUHc9c2Vzc2lvbi5wb3N0KHVybCtsaW5rMi5nZXQoImFjdGlvbiIpLGRhdGE9ZGF0KS50ZXh0CgkJCQkJcmVzVWJhaD1iczQuQmVhdXRpZnVsU291cCh1YmFoUHcsImh0bWwucGFyc2VyIikKCQkJCQlsaW5rMz1yZXNVYmFoLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQoJCQkJCWJ1dDI9WyJzdWJtaXRbTmV4dF0iLCJuaCIsImZiX2R0c2ciLCJqYXpvZXN0Il0KCQkJCQlpZiAiQnVhdCBLYXRhIFNhbmRpIEJhcnUiIGluIHJlLmZpbmRhbGwoIlw8dGl0bGU+KC4qPyk8XC90aXRsZT4iLHN0cih1YmFoUHcpKToKCQkJCQkJZm9yIGIgaW4gcmVzVWJhaCgiaW5wdXQiKToKCQkJCQkJCWRhdDIudXBkYXRlKHtiLmdldCgibmFtZSIpOmIuZ2V0KCJ2YWx1ZSIpfSkKCQkJCQkJZGF0Mi51cGRhdGUoeyJwYXNzd29yZF9uZXciOiIiLmpvaW4ocHdiYXJ1KX0pCgkJCQkJCWFuPXNlc3Npb24ucG9zdCh1cmwrbGluazMuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdDIpCgkJCQkJCWNva2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pCgkJCQkJCXByaW50KCJcciVzJXNcMDMzWzBcbiBPSyAlcyVzJXN8JXN8JXMJCQkiJShILHRpbCxOLEgsdXNlcixwd2JhcnVbMF0sY29raSkpCgkJCQkJCW9wZW4oJ09LL09LLSVzLnR4dCcgJSh3YWt0dSksICdhJykud3JpdGUoIiVzJXN8JXN8JXNcbiIgJSAoSCx1c2VyLHB3YmFydVswXSxjb2tpKSkKCQkJCQkJI2Nla19hcGsoY29raSkKCQkJCWVsc2U6CgkJCQkJcHJpbnQoIlxyJXMlcyBcMDMzWzAJIiUoSCx0aWwpKQoJCQkJCW9wZW4oJ09LL09LLSVzLnR4dCcgJSh3YWt0dSksICdhJykud3JpdGUoIiVzICVzfCVzfCVzXG4iICUgKEgsdXNlcixwdyxjb2tpKSkKCQkJCQkjY2VrX2Fwayhjb2tpKQoJCQllbGlmICIiIGluIHJlLmZpbmRhbGwoIlw8dGl0bGU+KC4qPyk8XC90aXRsZT4iLHN0cihyZXNwb25zZSkpOgoJCQkJcHJpbnQoIlxyJXNcMDMzWzBtIAkiJShNKSkKCQkJZWxzZToKCQkJCXByaW50KCIlcyVzXDAzM1swIiUoTSx0aWwpKQoJCWVsc2U6CgkJCWlmICJjX3VzZXIiIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpOgoJCQkJcHJpbnQoIlxyJXMlcyAgIiUoSCkpCgkJCQlvcGVuKCdPSy9PSy0lcy50eHQnICUod2FrdHUpLCAnYScpLndyaXRlKCIlcyVzfCVzXG4iICUgKEgsdXNlcixwdykpCgkJZm9yIG9wc2kgaW4gcmFuZ2UobGVuKGNlaykpOgoJCQludW1iZXIgKz0xCgkJCU1yaVQgKCIgICVzJXMuICVzJXMiJShQLHN0cihudW1iZXIpLEssY2VrW29wc2ldKSkKCWVsaWYgImxvZ2luX2Vycm9yIiBpbiBzdHIocmVzcG9uc2UpOgoJCW9oID0gcnVuLmZpbmQoImRpdiIseyJpZCI6ImxvZ2luX2Vycm9yIn0pLmZpbmQoImRpdiIpLnRleHQKCQlwcmludCgiJXPilbDilIAgJXMiJShNLG9oKSkKCWVsc2U6CgkJcHJpbnQoIiVzIFwwMzNbMG0iJShNKSkKCQkgIApkZWYgc2NhcnBwaW5nX3VhKCk6CiAgICAKICAgIAogICAgCiAgICB1cmwgPSAiaHR0cHM6Ly9hcGkuYXBpbGF5ZXIuY29tL3VzZXJfYWdlbnQvZ2VuZXJhdGU/YW5kcm9pZD10cnVlJmNocm9tZT10cnVlIgogICAgaGVhZGVyID0geyJhcGlrZXkiOiAiMlp4WG5qUUJ5RjZyUHUzR001RHRjRW1ySmZLcUI1eEwifQogICAgCiAgIAogICAgCiAgCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLGhlYWRlcnM9aGVhZGVyKQogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgdWFzY3JhcC5hcHBlbmQocmVzcG9uc2UuanNvbigpWyd1YSddKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHVhc2NyYXAuYXBwZW5kKCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNS4wOyBTQU1TVU5HIFNNLUc5MDBGIEJ1aWxkL0xSWDIxVCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgU2Ftc3VuZ0Jyb3dzZXIvMi4xIENocm9tZS8zNC4wLjE4NDcuNzYgTW9iaWxlIFNhZmFyaS81MzcuMzYiKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIHVhc2NyYXAuYXBwZW5kKCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNS4wOyBTQU1TVU5HIFNNLUc5MDBGIEJ1aWxkL0xSWDIxVCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgU2Ftc3VuZ0Jyb3dzZXIvMi4xIENocm9tZS8zNC4wLjE4NDcuNzYgTW9iaWxlIFNhZmFyaS81MzcuMzYiKQogICAgICAgIAoKCgojIC0tPiBNb2R1bGVzCmltcG9ydCByZXF1ZXN0cyxiczQsc3lzLG9zLGRhdGV0aW1lLHJlCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIGJzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCmZyb20gaXRlcnRvb2xzIGltcG9ydCBjb3VudCAKZnJvbSByZXF1ZXN0cyBpbXBvcnQgZ2V0IApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCAKZnJvbSByaWNoIGltcG9ydCBwcmludCBhcyBjZXRhawpmcm9tIHJpY2ggaW1wb3J0IHByaW50IGFzIHByaW50cwpmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsIGFzIG5lbApkb25lID0gRmFsc2UgCnJlc3VsdHMgPSBbXSAKIyAtLT4gIENsZWFyIFRlcm1pbmFsCmRlZiBjbGVhcigpOgogICAgaWYgImxpbnV4IiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKTpvcy5zeXN0ZW0oImNsZWFyIikKICAgIGVsaWYgIndpbiIgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCk6b3Muc3lzdGVtKCJjbHMiKQoKIyAtLT4gV2FrdHUKZGVmIHN0YXJ0KCk6CiAgICBnbG9iYWwgTXVsYWlfSmFsYW4KICAgIE11bGFpX0phbGFuID0gZGF0ZXRpbWUubm93KCkKZGVmIGFraGlyKCk6CiAgICBnbG9iYWwgQWtoaXJfSmFsYW4sIFRvdGFsX1dha3R1CiAgICBBa2hpcl9KYWxhbiA9IGRhdGV0aW1lLm5vdygpCiAgICBUb3RhbF9XYWt0dSA9IEFraGlyX0phbGFuIC0gTXVsYWlfSmFsYW4KICAgIHRyeToKICAgICAgICBNZW5pdCA9IHN0cihUb3RhbF9XYWt0dSkuc3BsaXQoJzonKVsxXQogICAgICAgIERldGlrID0gc3RyKFRvdGFsX1dha3R1KS5zcGxpdCgnOicpWzJdLnJlcGxhY2UoJy4nLCcsJykuc3BsaXQoJywnKVswXSArICcsJyArIHN0cihUb3RhbF9XYWt0dSkuc3BsaXQoJzonKVsyXS5yZXBsYWNlKCcuJywnLCcpLnNwbGl0KCcsJylbMV1bOjFdCiAgICAgICAgcHJpbnQoJ1xuICVzIERldGlrXG4nJShNZW5pdCxEZXRpaykpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoJ1xuXG5cbicpCgojIC0tPiBNYWluIFByb2dyYW0KY2xhc3MgZ2V0X2RhdGFfd2ViOgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi54eXogPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgICAgICB1cmwgPSBpbnB1dCgnIFVSTCA6ICcpCiAgICAgICAgcHJpbnQoJ1xuWzFdIFNvdXJjZSAnKQogICAgICAgIHByaW50KCdbMl0gUGFyc2VkJykKICAgICAgICBwcmludCgnICcpCiAgICAgICAgc2VsZi50YW55YSA9IGlucHV0KCdDSE9PU0UgOiAnKQogICAgICAgIHNlbGYuZG9tYWluID0gdXJsLnNwbGl0KCcvJylbMl0KICAgICAgICBzZWxmLmdldF9mb3JtKHVybCkKCiAgICBkZWYgZ2V0X2Zvcm0oc2VsZix1cmwpOgogICAgICAgIHJlcSA9IHNlbGYueHl6LmdldCh1cmwpCiAgICAgICAgcmFxID0gYnMocmVxLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykKICAgICAgICBmb3IgeCBpbiByYXEuZmluZF9hbGwoJ2Zvcm0nKToKICAgICAgICAgICAgaWYgc2VsZi50YW55YSBpbiBbJzEnLCcwMScsJ2EnXTogc2VsZi5wcmludGluZzEocmVxLHgpCiAgICAgICAgICAgIGVsaWYgc2VsZi50YW55YSBpbiBbJzInLCcwMicsJ2InXTogc2VsZi5wcmludGluZzIocmVxLHgpCiAgICAgICAgICAgIGVsaWYgc2VsZi50YW55YSBpbiBbJzMnLCcwMycsJ2MnXTogc2VsZi5wcmludGluZzModXJsLHJlcSx4KQogICAgICAgICAgICBlbHNlOiBleGl0KCdcbklzaSAgWWcgQmVuYXIhJykKCiAgICBkZWYgZ2V0X2hlYWQxKHNlbGYscmVxKToKICAgICAgICBkYXRhID0ge30KICAgICAgICBoZWFkID0gcmVxLmhlYWRlcnMKICAgICAgICB1c2xzID0gWydjb29raWUnLCdzZXQtY29va2llJywncmVwb3J0LXRvJywnZXhwaXJlcycsJ3gtZmItZGVidWcnLCdkYXRlJywnbGFzdC1tb2RpZmllZCcsJ2V0YWcnXQogICAgICAgIGZvciB4LHkgaW4gemlwKGhlYWQua2V5cygpLGhlYWQudmFsdWVzKCkpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiB4Lmxvd2VyKCkgaW4gdXNsczogY29udGludWUKICAgICAgICAgICAgICAgIGVsc2U6IGRhdGEudXBkYXRlKHt4Onl9KQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6Y29udGludWUKICAgICAgICByZXR1cm4oZGF0YSkKCiAgICBkZWYgZ2V0X2RhdGExKHNlbGYsZm9ybSk6CiAgICAgICAgZGF0YSA9IHt9CiAgICAgICAgZm9yIHkgaW4gZm9ybS5maW5kX2FsbCgnaW5wdXQnKToKICAgICAgICAgICAgdHJ5OmRhdGEudXBkYXRlKHt5WyduYW1lJ106eVsndmFsdWUnXX0pCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpjb250aW51ZQogICAgICAgIHJldHVybihkYXRhKQoKICAgIGRlZiBnZXRfZGF0YTIoc2VsZixmb3JtKToKICAgICAgICBkYXRhID0gW10KICAgICAgICBmb3IgeSBpbiBmb3JtLmZpbmRfYWxsKCdpbnB1dCcpOgogICAgICAgICAgICB0cnk6ZGF0YS5hcHBlbmQoeSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOmNvbnRpbnVlCiAgICAgICAgcmV0dXJuKGRhdGEpCgogICAgZGVmIGdldF9wb3N0MShzZWxmLGZvcm0pOgogICAgICAgIHogPSBmb3JtWydhY3Rpb24nXQogICAgICAgIGlmICdodHRwczovLycrc2VsZi5kb21haW4gaW4gejogcmV0dXJuKHopCiAgICAgICAgZWxpZiAnaHR0cDovLycrc2VsZi5kb21haW4gaW4gejogcmV0dXJuKHopCiAgICAgICAgZWxzZTogcmV0dXJuKCdodHRwczovLyVzJXMnJShzZWxmLmRvbWFpbix6KSkKCiAgICBkZWYgcHJpbnRpbmcxKHNlbGYscmVxLHgpOgogICAgICAgIGhlYWQgPSBzZWxmLmdldF9oZWFkMShyZXEpCiAgICAgICAgZGF0YSA9IHNlbGYuZ2V0X2RhdGExKHgpCiAgICAgICAgcG9zdCA9IHNlbGYuZ2V0X3Bvc3QxKHgpCiAgICAgICAgY29raSA9IHNlbGYueHl6LmNvb2tpZXMuZ2V0X2RpY3QoKQogICAgICAgIHByaW50KCdcblxuW1NPVVJDRSBQQVlMT0FEXVxuJykKICAgICAgICBwcmludCgnW0hvc3RdICVzJyUoc2VsZi5kb21haW4pKQogICAgICAgIHByaW50KCdbSGVhZF0gJXMnJShoZWFkKSkKICAgICAgICBwcmludCgnW0RhdGFdICVzJyUoZGF0YSkpCiAgICAgICAgcHJpbnQoJ1tDb2tpXSAlcyclKGNva2kpKQogICAgICAgIHByaW50KCdbUG9zdF0gJXMnJShwb3N0KSkKCiAgICBkZWYgcHJpbnRpbmcyKHNlbGYscmVxLHgpOgogICAgICAgIGhlYWQgPSBzZWxmLmdldF9oZWFkMShyZXEpCiAgICAgICAgZGF0YSA9IHNlbGYuZ2V0X2RhdGEyKHgpCiAgICAgICAgcG9zdCA9IHNlbGYuZ2V0X3Bvc3QxKHgpCiAgICAgICAgY29raSA9IHNlbGYueHl6LmNvb2tpZXMuZ2V0X2RpY3QoKQogICAgICAgIHByaW50KCdcblxuW1BBUlNFRCBQQVlMT0FEXVxuJykKICAgICAgICAjIC0tPiBUYW1waWwgSGVhZGVycwogICAgICAgIHByaW50KCdoZWFkID0geycpCiAgICAgICAgZm9yIHgseSBpbiB6aXAoaGVhZC5rZXlzKCksaGVhZC52YWx1ZXMoKSk6CiAgICAgICAgICAgIHByaW50KCcgICAgJXMlczogJXMnJSh4LCcgJyooMjktbGVuKHgpKSx5KSkKICAgICAgICBwcmludCgnICAgIH0nKQogICAgICAgICMgLS0+IFRhbXBpbCBEYXRhCiAgICAgICAgcHJpbnQoJ2RhdGEgPSB7JykKICAgICAgICBmb3IgeCBpbiBkYXRhOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiAndmFsdWUnIGluIHN0cih4KToKICAgICAgICAgICAgICAgICAgICBkcCA9ICduYW1lPScgKyByZS5zZWFyY2goJ25hbWU9KC4qPykvPicsc3RyKHgpKS5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgIGZwID0gcmUuc2VhcmNoKCd2YWx1ZT0iKC4qPykiJyxzdHIoZHApKS5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIgICAgJXMlczogJyVzJywiJSh4WyduYW1lJ10sJyAnKigxOS1sZW4oeFsnbmFtZSddKSksZnApKQogICAgICAgICAgICAgICAgZWxpZiAnbmFtZScgaW4gc3RyKHgpOgogICAgICAgICAgICAgICAgICAgIHByaW50KCIgICAgJXMlczogJycsIiUoeFsnbmFtZSddLCcgJyooMTktbGVuKHhbJ25hbWUnXSkpKSkKICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTogY29udGludWUKICAgICAgICBwcmludCgnICAgIH0nKQogICAgICAgICMgLS0+IFRhbXBpbCBDb29raWUKICAgICAgICBwcmludCgnY29va2llID0geycpCiAgICAgICAgZm9yIHgseSBpbiB6aXAoY29raS5rZXlzKCksY29raS52YWx1ZXMoKSk6CiAgICAgICAgICAgIHByaW50KCcgICAgJXMlczogJXMnJSh4LCcgJyooNS1sZW4oeCkpLHkpKQogICAgICAgIHByaW50KCcgICAgfScpCiAgICAgICAgIyAtLT4gUG9zdCBSZXF1ZXN0cwogICAgICAgIHByaW50KCJuZXh0ID0gJyVzJyIlKHBvc3QpKQogICAgICAgIHByaW50KCJwb3N0ID0gcmVxdWVzdHMuU2Vzc2lvbigpLnBvc3QobmV4dCxoZWFkZXJzPWhlYWQsZGF0YT1kYXRhLGNvb2tpZXM9Y29va2llKSIpCiAgICBkZWYgcHJpbnRpbmczKHNlbGYsdXJsLHJlcSx4KToKICAgICAgICBoZWFkID0gc2VsZi5nZXRfaGVhZDEocmVxKQogICAgICAgIGRhdGEgPSBzZWxmLmdldF9kYXRhMih4KQogICAgICAgIHBvc3QgPSBzZWxmLmdldF9wb3N0MSh4KQogICAgICAgIHByaW50KCdcblxuW1NPVVJDRSBDT0RFIFBPU1QgUkVRVUVTVFNdXG4nKQogICAgICAgICMgLS0+IFRhbXBpbCBHZXQgUmVxdWVzdHMKICAgICAgICBwcmludCgidXJsICA9ICclcyciJSh1cmwpKQogICAgICAgIHByaW50KCJyZXF1ID0gYnMocmVxdWVzdHMuU2Vzc2lvbigpLmdldCh1cmwpLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykiKQogICAgICAgICMgLS0+IFRhbXBpbCBIZWFkZXJzCiAgICAgICAgcHJpbnQoJ2hlYWQgPSB7JykKICAgICAgICBmb3IgeCx5IGluIHppcChoZWFkLmtleXMoKSxoZWFkLnZhbHVlcygpKToKICAgICAgICAgICAgcHJpbnQoJyAgICAlcyVzOiAlcyclKHgsJyAnKigyOS1sZW4oeCkpLHkpKQogICAgICAgIHByaW50KCcgICAgfScpCiAgICAgICAgIyAtLT4gVGFtcGlsIERhdGEKICAgICAgICBwcmludCgnZGF0YSA9IHsnKQogICAgICAgIGZvciB4IGluIGRhdGE6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmICd2YWx1ZScgaW4gc3RyKHgpOgogICAgICAgICAgICAgICAgICAgIGRwID0gJ25hbWU9JyArIHJlLnNlYXJjaCgnbmFtZT0oLio/KS8+JyxzdHIoeCkpLmdyb3VwKDEpCiAgICAgICAgICAgICAgICAgICAgZnAgPSByZS5zZWFyY2goJ3ZhbHVlPSIoLio/KSInLHN0cihkcCkpLmdyb3VwKDEpCiAgICAgICAgICAgICAgICAgICAgZ3AgPSBkcC5yZXBsYWNlKGZwLCcoLio/KScpCiAgICAgICAgICAgICAgICAgICAgcnMgPSAoInJlLnNlYXJjaCgnJXMnLHN0cihyZXF1KSkuZ3JvdXAoMSkiJShncCkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyAgICAlcyVzOiAlcywnJSh4WyduYW1lJ10sJyAnKigxOS1sZW4oeFsnbmFtZSddKSkscnMpKQogICAgICAgICAgICAgICAgZWxpZiAnbmFtZScgaW4gc3RyKHgpOgogICAgICAgICAgICAgICAgICAgIHByaW50KCIgICAgJXMlczogJycsIiUoeFsnbmFtZSddLCcgJyooMTktbGVuKHhbJ25hbWUnXSkpKSkKICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTogY29udGludWUKICAgICAgICBwcmludCgnICAgIH0nKQogICAgICAgICMgLS0+IFRhbXBpbCBDb29raWUKICAgICAgICBwcmludCgiY29va2llID0gcmVxdWVzdHMuU2Vzc2lvbigpLmNvb2tpZXMuZ2V0X2RpY3QoKSIpCiAgICAgICAgIyAtLT4gUG9zdCBSZXF1ZXN0cwogICAgICAgIHByaW50KCJuZXh0ID0gJyVzJyIlKHBvc3QpKQogICAgICAgIHByaW50KCJwb3N0ID0gcmVxdWVzdHMuU2Vzc2lvbigpLnBvc3QobmV4dCxoZWFkZXJzPWhlYWQsZGF0YT1kYXRhLGNvb2tpZXM9Y29va2llKSIpCgppZiBfX25hbWVfXz09J19fbWFpbl9fJzoKCXRyeTpvcy5zeXN0ZW0oJ2dpdCBwdWxsJykKCWV4Y2VwdDpwYXNzCgl0cnk6b3MubWtkaXIoJ01SSVQgT0snKQoJZXhjZXB0OnBhc3MKCXRyeTpvcy5ta2RpcignTVJJVCBDUCcpCglleGNlcHQ6cGFzcwoJdHJ5Om9zLnN5c3RlbSgndG91Y2ggLnByb3gudHh0JykKCWV4Y2VwdDpwYXNzCglsb2dpbigpCg=="))